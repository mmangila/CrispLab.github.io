{"version":3,"file":"plugin-svg.cjs.development.js","sources":["../src/SvgFeatureRenderer/components/FeatureLabel.tsx","../src/SvgFeatureRenderer/components/FeatureGlyph.js","../src/SvgFeatureRenderer/components/SvgOverlay.tsx","../src/SvgFeatureRenderer/components/Box.js","../src/SvgFeatureRenderer/components/Chevron.js","../src/SvgFeatureRenderer/components/Segments.js","../src/SvgFeatureRenderer/components/ProcessedTranscript.js","../src/SvgFeatureRenderer/components/Subfeatures.js","../src/SvgFeatureRenderer/components/util.ts","../src/SvgFeatureRenderer/components/SvgFeatureRendering.js","../src/SvgFeatureRenderer/configSchema.ts","../src/index.ts"],"sourcesContent":["import React from 'react'\nimport { measureText } from '@jbrowse/core/util'\n\nexport default function Label(props: {\n  text: string\n  x: number\n  y: number\n  color?: string\n  fontHeight?: number\n  featureWidth?: number\n  allowedWidthExpansion?: number\n  reversed?: boolean\n  fontWidthScaleFactor?: number\n}) {\n  const {\n    text,\n    x,\n    y,\n    color = 'black',\n    fontHeight = 13,\n    featureWidth = 0,\n    reversed,\n    allowedWidthExpansion,\n    fontWidthScaleFactor = 0.6,\n  } = props\n\n  const fontWidth = fontHeight * fontWidthScaleFactor\n  const totalWidth =\n    featureWidth && allowedWidthExpansion\n      ? featureWidth + allowedWidthExpansion\n      : Infinity\n\n  const measuredTextWidth = measureText(text, fontHeight)\n\n  return (\n    <text\n      x={reversed ? x + featureWidth - measuredTextWidth : x}\n      y={y + fontHeight}\n      style={{ fontSize: fontHeight, fill: color, cursor: 'default' }}\n    >\n      {measuredTextWidth > totalWidth\n        ? `${text.slice(0, totalWidth / fontWidth)}...`\n        : text}\n    </text>\n  )\n}\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { PropTypes as CommonPropTypes } from '@jbrowse/core/util/types/mst'\nimport { observer } from 'mobx-react'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport FeatureLabel from './FeatureLabel'\n\nfunction FeatureGlyph(props) {\n  const {\n    feature,\n    rootLayout,\n    selected,\n    config,\n    name,\n    shouldShowName,\n    description,\n    shouldShowDescription,\n    fontHeight,\n    allowedWidthExpansion,\n    reversed,\n  } = props\n\n  const featureLayout = rootLayout.getSubRecord(String(feature.id()))\n  const { GlyphComponent } = featureLayout.data\n\n  const glyphComponents = [\n    <GlyphComponent\n      key={`glyph-${feature.id()}`}\n      {...props}\n      feature={feature}\n      featureLayout={featureLayout}\n      selected={selected}\n    />,\n  ]\n\n  if (shouldShowName) {\n    glyphComponents.push(\n      <FeatureLabel\n        key={`glyph-name-${feature.id()}`}\n        text={name}\n        x={rootLayout.getSubRecord('nameLabel').absolute.left}\n        y={rootLayout.getSubRecord('nameLabel').absolute.top}\n        color={readConfObject(config, ['labels', 'nameColor'], { feature })}\n        fontHeight={fontHeight}\n        reversed={reversed}\n        featureWidth={featureLayout.width}\n        allowedWidthExpansion={allowedWidthExpansion}\n      />,\n    )\n  }\n\n  if (shouldShowDescription) {\n    glyphComponents.push(\n      <FeatureLabel\n        key={`glyph-description-${feature.id()}`}\n        text={description}\n        x={rootLayout.getSubRecord('descriptionLabel').absolute.left}\n        y={rootLayout.getSubRecord('descriptionLabel').absolute.top}\n        color={readConfObject(config, ['labels', 'descriptionColor'], {\n          feature,\n        })}\n        fontHeight={fontHeight}\n        featureWidth={featureLayout.width}\n        reversed={reversed}\n        allowedWidthExpansion={allowedWidthExpansion}\n      />,\n    )\n  }\n\n  return <g>{glyphComponents}</g>\n}\n\nFeatureGlyph.propTypes = {\n  feature: PropTypes.shape({\n    id: PropTypes.func.isRequired,\n    get: PropTypes.func.isRequired,\n  }).isRequired,\n  layout: PropTypes.shape({\n    addRect: PropTypes.func.isRequired,\n    getTotalHeight: PropTypes.func.isRequired,\n  }).isRequired,\n  rootLayout: PropTypes.shape({\n    addChild: PropTypes.func.isRequired,\n    getSubRecord: PropTypes.func.isRequired,\n  }).isRequired,\n  region: CommonPropTypes.Region.isRequired,\n  bpPerPx: PropTypes.number.isRequired,\n  reversed: PropTypes.bool,\n  selected: PropTypes.bool,\n  config: CommonPropTypes.ConfigSchema.isRequired,\n  name: PropTypes.string,\n  shouldShowName: PropTypes.bool,\n  description: PropTypes.string,\n  shouldShowDescription: PropTypes.bool,\n  fontHeight: PropTypes.number,\n  allowedWidthExpansion: PropTypes.number,\n  movedDuringLastMouseDown: PropTypes.bool.isRequired,\n}\n\nFeatureGlyph.defaultProps = {\n  reversed: false,\n  selected: false,\n  name: '',\n  shouldShowName: false,\n  description: '',\n  shouldShowDescription: false,\n  fontHeight: undefined,\n  allowedWidthExpansion: undefined,\n}\n\nexport default observer(FeatureGlyph)\n","import { bpSpanPx } from '@jbrowse/core/util'\nimport SimpleFeature from '@jbrowse/core/util/simpleFeature'\nimport { Region } from '@jbrowse/core/util/types'\nimport { observer } from 'mobx-react'\nimport React from 'react'\n\ntype LayoutRecord = [number, number, number, number]\ninterface SvgOverlayProps {\n  region: Region\n  displayModel: {\n    blockLayoutFeatures: Map<string, Map<string, LayoutRecord>>\n    selectedFeatureId?: string\n    featureIdUnderMouse?: string\n    contextMenuFeature?: SimpleFeature\n  }\n  bpPerPx: number\n  blockKey: string\n  movedDuringLastMouseDown: boolean\n  onFeatureMouseDown?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n  onFeatureMouseEnter?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n  onFeatureMouseOut?(\n    event:\n      | React.MouseEvent<SVGRectElement, MouseEvent>\n      | React.FocusEvent<SVGRectElement>,\n    featureId: string,\n  ): {}\n  onFeatureMouseOver?(\n    event:\n      | React.MouseEvent<SVGRectElement, MouseEvent>\n      | React.FocusEvent<SVGRectElement>,\n    featureId: string,\n  ): {}\n  onFeatureMouseUp?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n  onFeatureMouseLeave?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n  onFeatureMouseMove?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n  // synthesized from mouseup and mousedown\n  onFeatureClick?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n  onFeatureContextMenu?(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n    featureId: string,\n  ): {}\n}\n\ninterface OverlayRectProps extends React.SVGProps<SVGRectElement> {\n  rect?: LayoutRecord\n  region: Region\n  bpPerPx: number\n}\n\nfunction OverlayRect({\n  rect,\n  region,\n  bpPerPx,\n  ...rectProps\n}: OverlayRectProps) {\n  if (!rect) {\n    return null\n  }\n  const [leftBp, topPx, rightBp, bottomPx] = rect\n  const [leftPx, rightPx] = bpSpanPx(leftBp, rightBp, region, bpPerPx)\n  const rectTop = Math.round(topPx)\n  const screenWidth = (region.end - region.start) / bpPerPx\n  const rectHeight = Math.round(bottomPx - topPx)\n  const width = rightPx - leftPx\n\n  if (leftPx + width < 0) {\n    return null\n  }\n  const leftWithinBlock = Math.max(leftPx, 0)\n  const diff = leftWithinBlock - leftPx\n  const widthWithinBlock = Math.max(1, Math.min(width - diff, screenWidth))\n\n  return (\n    <rect\n      x={leftWithinBlock - 2}\n      y={rectTop - 2}\n      width={widthWithinBlock + 4}\n      height={rectHeight + 4}\n      {...rectProps}\n    />\n  )\n}\n\nfunction SvgOverlay({\n  displayModel: {\n    blockLayoutFeatures,\n    selectedFeatureId,\n    featureIdUnderMouse,\n    contextMenuFeature,\n  },\n  blockKey,\n  region,\n  bpPerPx,\n  movedDuringLastMouseDown,\n  ...handlers\n}: SvgOverlayProps) {\n  const blockLayout = blockLayoutFeatures?.get(blockKey)\n  if (!blockLayout) {\n    return null\n  }\n  const mouseoverFeatureId = featureIdUnderMouse || contextMenuFeature?.id()\n\n  function onFeatureMouseDown(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n  ) {\n    const { onFeatureMouseDown: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureMouseEnter(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n  ) {\n    const { onFeatureMouseEnter: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureMouseOut(\n    event:\n      | React.MouseEvent<SVGRectElement, MouseEvent>\n      | React.FocusEvent<SVGRectElement>,\n  ) {\n    const { onFeatureMouseOut: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureMouseOver(\n    event:\n      | React.MouseEvent<SVGRectElement, MouseEvent>\n      | React.FocusEvent<SVGRectElement>,\n  ) {\n    const { onFeatureMouseOver: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureMouseUp(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n  ) {\n    const { onFeatureMouseUp: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureMouseLeave(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n  ) {\n    const { onFeatureMouseLeave: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureMouseMove(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n  ) {\n    const { onFeatureMouseMove: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureClick(event: React.MouseEvent<SVGRectElement, MouseEvent>) {\n    if (movedDuringLastMouseDown) {\n      return undefined\n    }\n    const { onFeatureClick: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    event.stopPropagation()\n    return handler(event, mouseoverFeatureId)\n  }\n\n  function onFeatureContextMenu(\n    event: React.MouseEvent<SVGRectElement, MouseEvent>,\n  ) {\n    const { onFeatureContextMenu: handler } = handlers\n    if (!(handler && mouseoverFeatureId)) {\n      return undefined\n    }\n    return handler(event, mouseoverFeatureId)\n  }\n\n  return (\n    <>\n      {mouseoverFeatureId ? (\n        <OverlayRect\n          rect={blockLayout.get(mouseoverFeatureId)}\n          region={region}\n          bpPerPx={bpPerPx}\n          fill=\"#000\"\n          fillOpacity=\"0.2\"\n          onMouseDown={onFeatureMouseDown}\n          onMouseEnter={onFeatureMouseEnter}\n          onMouseOut={onFeatureMouseOut}\n          onMouseOver={onFeatureMouseOver}\n          onMouseUp={onFeatureMouseUp}\n          onMouseLeave={onFeatureMouseLeave}\n          onMouseMove={onFeatureMouseMove}\n          onClick={onFeatureClick}\n          onContextMenu={onFeatureContextMenu}\n          onFocus={onFeatureMouseOver}\n          onBlur={onFeatureMouseOut}\n          data-testid={mouseoverFeatureId}\n        />\n      ) : null}\n      {selectedFeatureId ? (\n        <OverlayRect\n          rect={blockLayout.get(selectedFeatureId)}\n          region={region}\n          bpPerPx={bpPerPx}\n          stroke=\"#00b8ff\"\n          fill=\"none\"\n        />\n      ) : null}\n    </>\n  )\n}\n\nexport default observer(SvgOverlay)\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { PropTypes as CommonPropTypes } from '@jbrowse/core/util/types/mst'\nimport { emphasize } from '@jbrowse/core/util/color'\nimport { observer } from 'mobx-react'\nimport ReactPropTypes from 'prop-types'\nimport React from 'react'\n\nfunction Box(props) {\n  const { feature, region, config, featureLayout, selected, bpPerPx } = props\n  const screenWidth = (region.end - region.start) / bpPerPx\n\n  const color1 = readConfObject(config, 'color1', { feature })\n  let emphasizedColor1\n  try {\n    emphasizedColor1 = emphasize(color1, 0.3)\n  } catch (error) {\n    emphasizedColor1 = color1\n  }\n  const color2 = readConfObject(config, 'color2', { feature })\n\n  const { left, top, width, height } = featureLayout.absolute\n\n  if (left + width < 0) {\n    return null\n  }\n  const leftWithinBlock = Math.max(left, 0)\n  const diff = leftWithinBlock - left\n  const widthWithinBlock = Math.max(1, Math.min(width - diff, screenWidth))\n\n  return (\n    <rect\n      data-testid={`box-${feature.id()}`}\n      x={leftWithinBlock}\n      y={top}\n      width={widthWithinBlock}\n      height={height}\n      fill={selected ? emphasizedColor1 : color1}\n      stroke={selected ? color2 : undefined}\n    />\n  )\n}\n\nBox.propTypes = {\n  feature: ReactPropTypes.shape({\n    get: ReactPropTypes.func.isRequired,\n    id: ReactPropTypes.func.isRequired,\n  }).isRequired,\n  region: CommonPropTypes.Region.isRequired,\n  bpPerPx: ReactPropTypes.number.isRequired,\n  featureLayout: ReactPropTypes.shape({\n    absolute: ReactPropTypes.shape({\n      top: ReactPropTypes.number.isRequired,\n      left: ReactPropTypes.number.isRequired,\n      width: ReactPropTypes.number.isRequired,\n      height: ReactPropTypes.number.isRequired,\n    }),\n  }).isRequired,\n  selected: ReactPropTypes.bool,\n  config: CommonPropTypes.ConfigSchema.isRequired,\n}\n\nBox.defaultProps = {\n  selected: false,\n}\n\nexport default observer(Box)\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { PropTypes as CommonPropTypes } from '@jbrowse/core/util/types/mst'\nimport { emphasize } from '@jbrowse/core/util/color'\nimport { observer } from 'mobx-react'\nimport ReactPropTypes from 'prop-types'\nimport React from 'react'\nimport { isUTR } from './util'\n\nconst utrHeightFraction = 0.65\n\nfunction Chevron(props) {\n  const {\n    feature,\n    bpPerPx,\n    region,\n    config,\n    featureLayout,\n    selected,\n    reversed,\n  } = props\n\n  const screenWidth = (region.end - region.start) / bpPerPx\n  const width = Math.max(featureLayout.absolute.width, 1)\n  const { left } = featureLayout.absolute\n  let { top, height } = featureLayout.absolute\n  if (isUTR(feature)) {\n    top += ((1 - utrHeightFraction) / 2) * height\n    height *= utrHeightFraction\n  }\n\n  const strand = feature.get('strand')\n  const direction = strand * (reversed ? -1 : 1)\n  const color = isUTR(feature)\n    ? readConfObject(config, 'color3', { feature })\n    : readConfObject(config, 'color1', { feature })\n  let emphasizedColor\n  try {\n    emphasizedColor = emphasize(color, 0.3)\n  } catch (error) {\n    emphasizedColor = color\n  }\n  const color2 = readConfObject(config, 'color2', { feature })\n\n  if (left + width < 0) {\n    return null\n  }\n  const leftWithinBlock = Math.max(left, 0)\n  const diff = leftWithinBlock - left\n  const widthWithinBlock = Math.max(1, Math.min(width - diff, screenWidth))\n\n  return (\n    <>\n      <rect\n        data-testid={feature.id()}\n        stroke={selected ? color2 : undefined}\n        fill={selected ? emphasizedColor : color}\n        x={leftWithinBlock}\n        y={top}\n        width={widthWithinBlock}\n        height={height}\n      />\n      {direction < 0 && diff === 0 ? (\n        <polygon\n          stroke={selected ? color2 : undefined}\n          fill={selected ? emphasizedColor : color}\n          points={[\n            [left, top],\n            [left - height / 2, top + height / 2],\n            [left, top + height],\n          ]}\n        />\n      ) : null}\n      {direction > 0 && leftWithinBlock + widthWithinBlock < screenWidth ? (\n        <polygon\n          stroke={selected ? color2 : undefined}\n          fill={selected ? emphasizedColor : color}\n          points={[\n            [leftWithinBlock + widthWithinBlock, top],\n            [leftWithinBlock + widthWithinBlock + height / 2, top + height / 2],\n            [leftWithinBlock + widthWithinBlock, top + height],\n          ]}\n        />\n      ) : null}\n    </>\n  )\n}\n\nChevron.propTypes = {\n  feature: ReactPropTypes.shape({\n    id: ReactPropTypes.func.isRequired,\n    get: ReactPropTypes.func.isRequired,\n  }).isRequired,\n  region: CommonPropTypes.Region.isRequired,\n  bpPerPx: ReactPropTypes.number.isRequired,\n  featureLayout: ReactPropTypes.shape({\n    absolute: ReactPropTypes.shape({\n      top: ReactPropTypes.number.isRequired,\n      left: ReactPropTypes.number.isRequired,\n      width: ReactPropTypes.number.isRequired,\n      height: ReactPropTypes.number.isRequired,\n    }),\n  }).isRequired,\n  selected: ReactPropTypes.bool,\n  config: CommonPropTypes.ConfigSchema.isRequired,\n  reversed: ReactPropTypes.bool,\n}\n\nChevron.defaultProps = {\n  selected: false,\n  reversed: false,\n}\n\nexport default observer(Chevron)\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { PropTypes as CommonPropTypes } from '@jbrowse/core/util/types/mst'\nimport { emphasize } from '@jbrowse/core/util/color'\nimport { observer } from 'mobx-react'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nfunction Segments(props) {\n  const {\n    feature,\n    featureLayout,\n    selected,\n    config,\n    reversed,\n    // some subfeatures may be computed e.g. makeUTRs,\n    // so these are passed as a prop\n    // eslint-disable-next-line react/prop-types\n    subfeatures: subfeaturesProp,\n  } = props\n\n  const subfeatures = subfeaturesProp || feature.get('subfeatures')\n  const color2 = readConfObject(config, 'color2', { feature })\n  let emphasizedColor2\n  try {\n    emphasizedColor2 = emphasize(color2, 0.3)\n  } catch (error) {\n    emphasizedColor2 = color2\n  }\n  const { left, top, width, height } = featureLayout.absolute\n  const points = [\n    [left, top + height / 2],\n    [left + width, top + height / 2],\n  ]\n  const strand = feature.get('strand')\n  if (strand) {\n    points.push(\n      [left + width - height / 4, top + height / 4],\n      [left + width - height / 4, top + 3 * (height / 4)],\n      [left + width, top + height / 2],\n    )\n  }\n\n  return (\n    <>\n      <polyline\n        data-testid={feature.id()}\n        transform={\n          strand && ((!reversed && strand < 0) || (reversed && strand > 0))\n            ? `rotate(180,${left + width / 2},${top + height / 2})`\n            : undefined\n        }\n        points={points}\n        stroke={selected ? emphasizedColor2 : color2}\n      />\n      {\n        // eslint-disable-next-line react/prop-types\n        subfeatures.map(subfeature => {\n          const subfeatureId = String(subfeature.id())\n          const subfeatureLayout = featureLayout.getSubRecord(subfeatureId)\n          // This subfeature got filtered out\n          if (!subfeatureLayout) {\n            return null\n          }\n          const { GlyphComponent } = subfeatureLayout.data\n          return (\n            <GlyphComponent\n              key={`glyph-${subfeatureId}`}\n              {...props}\n              feature={subfeature}\n              featureLayout={subfeatureLayout}\n              selected={selected}\n            />\n          )\n        })\n      }\n    </>\n  )\n}\n\nSegments.propTypes = {\n  feature: PropTypes.shape({\n    id: PropTypes.func.isRequired,\n    get: PropTypes.func.isRequired,\n  }).isRequired,\n  featureLayout: PropTypes.shape({\n    absolute: PropTypes.shape({\n      top: PropTypes.number.isRequired,\n      left: PropTypes.number.isRequired,\n      width: PropTypes.number.isRequired,\n      height: PropTypes.number.isRequired,\n    }),\n    getSubRecord: PropTypes.func.isRequired,\n  }).isRequired,\n  selected: PropTypes.bool,\n  config: CommonPropTypes.ConfigSchema.isRequired,\n  reversed: PropTypes.bool,\n}\n\nSegments.defaultProps = {\n  selected: false,\n  reversed: false,\n}\n\nexport default observer(Segments)\n","import { observer } from 'mobx-react'\nimport React from 'react'\nimport SimpleFeature from '@jbrowse/core/util/simpleFeature'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport Segments from './Segments'\nimport { layOutFeature, layOutSubfeatures } from './util'\n\nfunction ProcessedTranscript(props) {\n  // eslint-disable-next-line react/prop-types\n  const { feature, config } = props\n  const subfeatures = getSubparts(feature, config)\n\n  // we manually compute some subfeatures, so pass these separately\n  return <Segments {...props} subfeatures={subfeatures} />\n}\n\n// make a function that will filter features features according to the\n// subParts conf var\nfunction makeSubpartsFilter(confKey = 'subParts', config) {\n  let filter = readConfObject(config, confKey)\n\n  if (typeof filter == 'string') {\n    // convert to array\n    filter = filter.split(/\\s*,\\s*/)\n  }\n\n  if (Array.isArray(filter)) {\n    const typeNames = filter.map(typeName => typeName.toLowerCase())\n    return feature => {\n      return typeNames.includes(feature.get('type').toLowerCase())\n    }\n  }\n  if (typeof filter === 'function') {\n    return filter\n  }\n  return () => true\n}\n\nfunction filterSubpart(feature, config) {\n  return makeSubpartsFilter('subParts', config)(feature)\n}\n\nfunction isUTR(feature) {\n  return /(\\bUTR|_UTR|untranslated[_\\s]region)\\b/.test(\n    feature.get('type') || '',\n  )\n}\n\nfunction makeUTRs(parent, subs) {\n  // based on Lincoln's UTR-making code in Bio::Graphics::Glyph::processed_transcript\n  const subparts = [...subs]\n\n  let codeStart = Infinity\n  let codeEnd = -Infinity\n\n  let haveLeftUTR\n  let haveRightUTR\n\n  // gather exons, find coding start and end, and look for UTRs\n  const exons = []\n  for (let i = 0; i < subparts.length; i++) {\n    const type = subparts[i].get('type')\n    if (/^cds/i.test(type)) {\n      if (codeStart > subparts[i].get('start')) {\n        codeStart = subparts[i].get('start')\n      }\n      if (codeEnd < subparts[i].get('end')) {\n        codeEnd = subparts[i].get('end')\n      }\n    } else if (/exon/i.test(type)) {\n      exons.push(subparts[i])\n    } else if (isUTR(subparts[i])) {\n      haveLeftUTR = subparts[i].get('start') === parent.get('start')\n      haveRightUTR = subparts[i].get('end') === parent.get('end')\n    }\n  }\n\n  // bail if we don't have exons and CDS\n  if (!(exons.length && codeStart < Infinity && codeEnd > -Infinity)) {\n    return subparts\n  }\n\n  // make sure the exons are sorted by coord\n  exons.sort((a, b) => a.get('start') - b.get('start'))\n\n  const strand = parent.get('strand')\n\n  // make the left-hand UTRs\n  let start\n  let end\n  if (!haveLeftUTR) {\n    for (let i = 0; i < exons.length; i++) {\n      start = exons[i].get('start')\n      if (start >= codeStart) {\n        break\n      }\n      end = codeStart > exons[i].get('end') ? exons[i].get('end') : codeStart\n      const type = strand >= 0 ? 'five_prime_UTR' : 'three_prime_UTR'\n      subparts.unshift(\n        new SimpleFeature({\n          parent,\n          id: `${parent.id()}_${type}_${i}`,\n          data: { start, end, strand, type },\n        }),\n      )\n    }\n  }\n\n  // make the right-hand UTRs\n  if (!haveRightUTR) {\n    for (let i = exons.length - 1; i >= 0; i--) {\n      end = exons[i].get('end')\n      if (end <= codeEnd) {\n        break\n      }\n\n      start = codeEnd < exons[i].get('start') ? exons[i].get('start') : codeEnd\n      const type = strand >= 0 ? 'three_prime_UTR' : 'five_prime_UTR'\n      subparts.push(\n        new SimpleFeature({\n          parent,\n          id: `${parent.id()}_${type}_${i}`,\n          data: { start, end, strand, type },\n        }),\n      )\n    }\n  }\n\n  return subparts\n}\n\nfunction getSubparts(f, config) {\n  let c = f.get('subfeatures')\n  if (!c || !c.length) {\n    return []\n  }\n  const hasUTRs = !!c.find(child => isUTR(child))\n  const isTranscript = ['mRNA', 'transcript'].includes(f.get('type'))\n  const impliedUTRs = !hasUTRs && isTranscript\n\n  // if we think we should use impliedUTRs, or it is specifically in the\n  // config, then makeUTRs\n  if (impliedUTRs || readConfObject(config, 'impliedUTRs')) {\n    c = makeUTRs(f, c)\n  }\n\n  return c.filter(element => filterSubpart(element, config))\n}\n\nProcessedTranscript.layOut = ({\n  layout,\n  feature,\n  bpPerPx,\n  reversed,\n  config,\n}) => {\n  const subLayout = layOutFeature({\n    layout,\n    feature,\n    bpPerPx,\n    reversed,\n    config,\n  })\n  const subfeatures = getSubparts(feature, config)\n  layOutSubfeatures({\n    layout: subLayout,\n    subfeatures,\n    bpPerPx,\n    reversed,\n    config,\n  })\n  return subLayout\n}\n\nexport default observer(ProcessedTranscript)\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { observer } from 'mobx-react'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { chooseGlyphComponent, layOut, layOutFeature } from './util'\n\nfunction Subfeatures(props) {\n  const { feature, featureLayout, selected } = props\n\n  return (\n    <>\n      {feature.get('subfeatures').map(subfeature => {\n        const subfeatureId = String(subfeature.id())\n        const subfeatureLayout = featureLayout.getSubRecord(subfeatureId)\n        const { GlyphComponent } = subfeatureLayout.data\n        return (\n          <GlyphComponent\n            key={`glyph-${subfeatureId}`}\n            {...props}\n            feature={subfeature}\n            featureLayout={subfeatureLayout}\n            selected={selected}\n          />\n        )\n      })}\n    </>\n  )\n}\n\nSubfeatures.propTypes = {\n  feature: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  featureLayout: PropTypes.shape({\n    getSubRecord: PropTypes.func.isRequired,\n  }).isRequired,\n  selected: PropTypes.bool,\n  reversed: PropTypes.bool,\n}\n\nSubfeatures.defaultProps = {\n  selected: false,\n  reversed: false,\n}\n\nSubfeatures.layOut = ({ layout, feature, bpPerPx, reversed, config }) => {\n  const subLayout = layOutFeature({\n    layout,\n    feature,\n    bpPerPx,\n    reversed,\n    config,\n  })\n  const displayMode = readConfObject(config, 'displayMode')\n  if (displayMode !== 'reducedRepresentation') {\n    const subfeatures = feature.get('subfeatures') || []\n    let topOffset = 0\n    subfeatures.forEach(subfeature => {\n      const SubfeatureGlyphComponent = chooseGlyphComponent(subfeature)\n      const subfeatureHeight = readConfObject(config, 'height', {\n        feature: subfeature,\n      })\n\n      const subSubLayout = (SubfeatureGlyphComponent.layOut || layOut)({\n        layout: subLayout,\n        feature: subfeature,\n        bpPerPx,\n        reversed,\n        config,\n      })\n      subSubLayout.move(0, topOffset)\n      topOffset +=\n        displayMode === 'collapse'\n          ? 0\n          : (displayMode === 'compact'\n              ? subfeatureHeight / 3\n              : subfeatureHeight) + 2\n    })\n  }\n  return subLayout\n}\n\nexport default observer(Subfeatures)\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport SceneGraph from '@jbrowse/core/util/layouts/SceneGraph'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { AnyConfigurationModel } from '@jbrowse/core/configuration/configurationSchema'\nimport Box from './Box'\nimport Chevron from './Chevron'\nimport ProcessedTranscript from './ProcessedTranscript'\nimport Segments from './Segments'\nimport Subfeatures from './Subfeatures'\n\ninterface Glyph extends React.FunctionComponent {\n  layOut?: Function\n}\n\nexport function chooseGlyphComponent(feature: Feature): Glyph {\n  const type = feature.get('type')\n  const strand = feature.get('strand')\n  const subfeatures: Feature[] = feature.get('subfeatures')\n\n  if (subfeatures) {\n    const hasSubSub = subfeatures.find(subfeature => {\n      return !!subfeature.get('subfeatures')\n    })\n    if (hasSubSub) {\n      return Subfeatures\n    }\n    const transcriptTypes = ['mRNA', 'transcript']\n    if (\n      transcriptTypes.includes(type) &&\n      subfeatures.find(f => f.get('type') === 'CDS')\n    ) {\n      return ProcessedTranscript\n    }\n    return Segments\n  }\n  return [1, -1].includes(strand) ? Chevron : Box\n}\n\ninterface BaseLayOutArgs {\n  layout: SceneGraph\n  bpPerPx: number\n  reversed: boolean\n  config: AnyConfigurationModel\n}\n\ninterface FeatureLayOutArgs extends BaseLayOutArgs {\n  feature: Feature\n}\n\ninterface SubfeatureLayOutArgs extends BaseLayOutArgs {\n  subfeatures: Feature[]\n}\n\nexport function layOut({\n  layout,\n  feature,\n  bpPerPx,\n  reversed,\n  config,\n}: FeatureLayOutArgs): SceneGraph {\n  const displayMode = readConfObject(config, 'displayMode')\n  const subLayout = layOutFeature({\n    layout,\n    feature,\n    bpPerPx,\n    reversed,\n    config,\n  })\n  if (displayMode !== 'reducedRepresentation') {\n    layOutSubfeatures({\n      layout: subLayout,\n      subfeatures: feature.get('subfeatures') || [],\n      bpPerPx,\n      reversed,\n      config,\n    })\n  }\n  return subLayout\n}\n\nexport function layOutFeature(args: FeatureLayOutArgs): SceneGraph {\n  const { layout, feature, bpPerPx, reversed, config } = args\n  const displayMode = readConfObject(config, 'displayMode')\n  const GlyphComponent =\n    displayMode === 'reducedRepresentation'\n      ? Chevron\n      : chooseGlyphComponent(feature)\n  const parentFeature = feature.parent()\n  let x = 0\n  if (parentFeature) {\n    x = reversed\n      ? (parentFeature.get('end') - feature.get('end')) / bpPerPx\n      : (feature.get('start') - parentFeature.get('start')) / bpPerPx\n  }\n  const height = readConfObject(config, 'height', { feature })\n  const width = (feature.get('end') - feature.get('start')) / bpPerPx\n  const layoutParent = layout.parent\n  const top = layoutParent ? layoutParent.top : 0\n  const subLayout = layout.addChild(\n    String(feature.id()),\n    x,\n    displayMode === 'collapse' ? 0 : top,\n    width,\n    displayMode === 'compact' ? height / 2 : height,\n    { GlyphComponent },\n  )\n  return subLayout\n}\n\nexport function layOutSubfeatures(args: SubfeatureLayOutArgs): void {\n  const { layout: subLayout, subfeatures, bpPerPx, reversed, config } = args\n  subfeatures.forEach(subfeature => {\n    const SubfeatureGlyphComponent = chooseGlyphComponent(subfeature)\n    ;(SubfeatureGlyphComponent.layOut || layOut)({\n      layout: subLayout,\n      feature: subfeature,\n      bpPerPx,\n      reversed,\n      config,\n    })\n  })\n}\n\nexport function isUTR(feature: Feature): boolean {\n  return /(\\bUTR|_UTR|untranslated[_\\s]region)\\b/.test(\n    feature.get('type') || '',\n  )\n}\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { PropTypes as CommonPropTypes } from '@jbrowse/core/util/types/mst'\nimport { bpToPx, measureText } from '@jbrowse/core/util'\nimport SceneGraph from '@jbrowse/core/util/layouts/SceneGraph'\nimport { observer } from 'mobx-react'\nimport ReactPropTypes from 'prop-types'\nimport React, { useEffect, useRef, useState, useCallback } from 'react'\nimport FeatureGlyph from './FeatureGlyph'\nimport SvgOverlay from './SvgOverlay'\nimport { chooseGlyphComponent, layOut } from './util'\n\nconst renderingStyle = {\n  position: 'relative',\n}\n\nconst padding = 2\n\nfunction RenderedFeatureGlyph(props) {\n  const { feature, bpPerPx, region, config, displayMode, layout } = props\n  const { reversed } = region\n  const start = feature.get(reversed ? 'end' : 'start')\n  const startPx = bpToPx(start, region, bpPerPx)\n  const labelsAllowed = displayMode !== 'compact' && displayMode !== 'collapsed'\n\n  const rootLayout = new SceneGraph('root', 0, 0, 0, 0)\n  const GlyphComponent = chooseGlyphComponent(feature)\n  const featureLayout = (GlyphComponent.layOut || layOut)({\n    layout: rootLayout,\n    feature,\n    bpPerPx,\n    reversed,\n    config,\n  })\n  let shouldShowName\n  let shouldShowDescription\n  let name\n  let description\n  let fontHeight\n  let expansion\n  if (labelsAllowed) {\n    const showLabels = readConfObject(config, 'showLabels')\n    fontHeight = readConfObject(config, ['labels', 'fontSize'], { feature })\n    expansion = readConfObject(config, 'maxFeatureGlyphExpansion') || 0\n    name = readConfObject(config, ['labels', 'name'], { feature }) || ''\n    shouldShowName = /\\S/.test(name) && showLabels\n\n    description =\n      readConfObject(config, ['labels', 'description'], { feature }) || ''\n    shouldShowDescription = /\\S/.test(description) && showLabels\n    const textVerticalPadding = 2\n\n    let nameWidth = 0\n    if (shouldShowName) {\n      nameWidth =\n        Math.round(\n          Math.min(measureText(name, fontHeight), rootLayout.width + expansion),\n        ) + padding\n      rootLayout.addChild(\n        'nameLabel',\n        0,\n        featureLayout.bottom + textVerticalPadding,\n        nameWidth,\n        fontHeight,\n      )\n    }\n\n    let descriptionWidth = 0\n    if (shouldShowDescription) {\n      const aboveLayout = shouldShowName\n        ? rootLayout.getSubRecord('nameLabel')\n        : featureLayout\n      descriptionWidth =\n        Math.round(\n          Math.min(\n            measureText(description, fontHeight),\n            rootLayout.width + expansion,\n          ),\n        ) + padding\n      rootLayout.addChild(\n        'descriptionLabel',\n        0,\n        aboveLayout.bottom + textVerticalPadding,\n        descriptionWidth,\n        fontHeight,\n      )\n    }\n  }\n\n  const topPx = layout.addRect(\n    feature.id(),\n    feature.get('start'),\n    feature.get('start') + rootLayout.width * bpPerPx,\n    rootLayout.height,\n  )\n  if (topPx === null) {\n    return null\n  }\n  rootLayout.move(startPx, topPx)\n\n  return (\n    <FeatureGlyph\n      key={`svg-feature-${feature.id()}`}\n      feature={feature}\n      layout={layout}\n      rootLayout={rootLayout}\n      bpPerPx={bpPerPx}\n      config={config}\n      name={String(name)}\n      shouldShowName={shouldShowName}\n      description={String(description)}\n      shouldShowDescription={shouldShowDescription}\n      fontHeight={fontHeight}\n      allowedWidthExpansion={expansion}\n      reversed={region.reversed}\n      {...props}\n    />\n  )\n}\n\nRenderedFeatureGlyph.propTypes = {\n  layout: ReactPropTypes.shape({\n    addRect: ReactPropTypes.func.isRequired,\n    getTotalHeight: ReactPropTypes.func.isRequired,\n  }).isRequired,\n\n  displayMode: ReactPropTypes.string.isRequired,\n  region: CommonPropTypes.Region.isRequired,\n  bpPerPx: ReactPropTypes.number.isRequired,\n  feature: ReactPropTypes.shape({\n    id: ReactPropTypes.func.isRequired,\n    get: ReactPropTypes.func.isRequired,\n  }).isRequired,\n  config: CommonPropTypes.ConfigSchema.isRequired,\n}\n\nconst RenderedFeatures = observer(props => {\n  const { features } = props\n  const featuresRendered = []\n  for (const feature of features.values()) {\n    featuresRendered.push(\n      <RenderedFeatureGlyph key={feature.id()} feature={feature} {...props} />,\n    )\n  }\n  return <>{featuresRendered}</>\n})\nRenderedFeatures.propTypes = {\n  features: ReactPropTypes.oneOfType([\n    ReactPropTypes.instanceOf(Map),\n    ReactPropTypes.arrayOf(ReactPropTypes.shape()),\n  ]),\n  layout: ReactPropTypes.shape({\n    addRect: ReactPropTypes.func.isRequired,\n    getTotalHeight: ReactPropTypes.func.isRequired,\n  }).isRequired,\n}\n\nRenderedFeatures.defaultProps = {\n  features: [],\n}\n\nfunction SvgFeatureRendering(props) {\n  const {\n    layout,\n    blockKey,\n    regions,\n    bpPerPx,\n    features,\n    config,\n    displayModel,\n    exportSVG,\n  } = props\n  const [region] = regions || []\n  const width = (region.end - region.start) / bpPerPx\n  const displayMode = readConfObject(config, 'displayMode')\n\n  const ref = useRef()\n  const [mouseIsDown, setMouseIsDown] = useState(false)\n  const [movedDuringLastMouseDown, setMovedDuringLastMouseDown] = useState(\n    false,\n  )\n  const [height, setHeight] = useState(0)\n  const {\n    onMouseOut,\n    onMouseDown,\n    onMouseLeave,\n    onMouseEnter,\n    onMouseOver,\n    onMouseMove,\n    onMouseUp,\n    onClick,\n  } = props\n\n  const mouseDown = useCallback(\n    event => {\n      setMouseIsDown(true)\n      setMovedDuringLastMouseDown(false)\n      const handler = onMouseDown\n      if (!handler) {\n        return undefined\n      }\n      return handler(event)\n    },\n    [onMouseDown],\n  )\n\n  const mouseUp = useCallback(\n    event => {\n      setMouseIsDown(false)\n      const handler = onMouseUp\n      if (!handler) {\n        return undefined\n      }\n      return handler(event)\n    },\n    [onMouseUp],\n  )\n\n  const mouseEnter = useCallback(\n    event => {\n      const handler = onMouseEnter\n      if (!handler) {\n        return undefined\n      }\n      return handler(event)\n    },\n    [onMouseEnter],\n  )\n\n  const mouseLeave = useCallback(\n    event => {\n      const handler = onMouseLeave\n      if (!handler) {\n        return undefined\n      }\n      return handler(event)\n    },\n    [onMouseLeave],\n  )\n\n  const mouseOver = useCallback(\n    event => {\n      const handler = onMouseOver\n      if (!handler) {\n        return undefined\n      }\n      return handler(event)\n    },\n    [onMouseOver],\n  )\n\n  const mouseOut = useCallback(\n    event => {\n      const handler = onMouseOut\n      if (!handler) {\n        return undefined\n      }\n      return handler(event)\n    },\n    [onMouseOut],\n  )\n\n  const mouseMove = useCallback(\n    event => {\n      if (mouseIsDown) {\n        setMovedDuringLastMouseDown(true)\n      }\n      let offsetX = 0\n      let offsetY = 0\n      if (ref.current) {\n        offsetX = ref.current.getBoundingClientRect().left\n        offsetY = ref.current.getBoundingClientRect().top\n      }\n      offsetX = event.clientX - offsetX\n      offsetY = event.clientY - offsetY\n      const px = region.reversed ? width - offsetX : offsetX\n      const clientBp = region.start + bpPerPx * px\n\n      const featureIdCurrentlyUnderMouse = displayModel.getFeatureOverlapping(\n        blockKey,\n        clientBp,\n        offsetY,\n      )\n\n      if (onMouseMove) {\n        onMouseMove(event, featureIdCurrentlyUnderMouse)\n      }\n    },\n    [\n      blockKey,\n      bpPerPx,\n      mouseIsDown,\n      onMouseMove,\n      region.reversed,\n      region.start,\n      displayModel,\n      width,\n    ],\n  )\n\n  const click = useCallback(\n    event => {\n      // don't select a feature if we are clicking and dragging\n      if (movedDuringLastMouseDown) {\n        return\n      }\n      if (onClick) {\n        onClick(event)\n      }\n    },\n    [movedDuringLastMouseDown, onClick],\n  )\n\n  useEffect(() => {\n    setHeight(layout.getTotalHeight())\n  }, [layout])\n\n  if (exportSVG) {\n    return (\n      <RenderedFeatures\n        features={features}\n        displayMode={displayMode}\n        {...props}\n        region={region}\n      />\n    )\n  }\n  return (\n    <div style={renderingStyle}>\n      <svg\n        ref={ref}\n        className=\"SvgFeatureRendering\"\n        width={`${width}px`}\n        height={`${height}px`}\n        onMouseDown={mouseDown}\n        onMouseUp={mouseUp}\n        onMouseEnter={mouseEnter}\n        onMouseLeave={mouseLeave}\n        onMouseOver={mouseOver}\n        onMouseOut={mouseOut}\n        onMouseMove={mouseMove}\n        onFocus={mouseEnter}\n        onBlur={mouseLeave}\n        onClick={click}\n        style={{ display: 'block' }}\n      >\n        <RenderedFeatures\n          features={features}\n          displayMode={displayMode}\n          {...props}\n          region={region}\n          movedDuringLastMouseDown={movedDuringLastMouseDown}\n        />\n        <SvgOverlay {...props} region={region} />\n      </svg>\n    </div>\n  )\n}\n\nSvgFeatureRendering.propTypes = {\n  layout: ReactPropTypes.shape({\n    addRect: ReactPropTypes.func.isRequired,\n    getTotalHeight: ReactPropTypes.func.isRequired,\n  }).isRequired,\n\n  regions: ReactPropTypes.arrayOf(CommonPropTypes.Region).isRequired,\n  bpPerPx: ReactPropTypes.number.isRequired,\n  features: ReactPropTypes.oneOfType([\n    ReactPropTypes.instanceOf(Map),\n    ReactPropTypes.arrayOf(ReactPropTypes.shape()),\n  ]),\n  config: CommonPropTypes.ConfigSchema.isRequired,\n  displayModel: ReactPropTypes.shape({\n    configuration: ReactPropTypes.shape({}),\n    getFeatureOverlapping: ReactPropTypes.func,\n    selectedFeatureId: ReactPropTypes.string,\n    featureIdUnderMouse: ReactPropTypes.string,\n  }),\n\n  onMouseDown: ReactPropTypes.func,\n  onMouseUp: ReactPropTypes.func,\n  onMouseEnter: ReactPropTypes.func,\n  onMouseLeave: ReactPropTypes.func,\n  onMouseOver: ReactPropTypes.func,\n  onMouseOut: ReactPropTypes.func,\n  onMouseMove: ReactPropTypes.func,\n  onClick: ReactPropTypes.func,\n  onContextMenu: ReactPropTypes.func,\n  onFeatureClick: ReactPropTypes.func,\n  onFeatureContextMenu: ReactPropTypes.func,\n  blockKey: ReactPropTypes.string,\n  exportSVG: ReactPropTypes.shape({}),\n}\n\nSvgFeatureRendering.defaultProps = {\n  displayModel: {},\n  exportSVG: undefined,\n\n  features: new Map(),\n  blockKey: undefined,\n\n  onMouseDown: undefined,\n  onMouseUp: undefined,\n  onMouseEnter: undefined,\n  onMouseLeave: undefined,\n  onMouseOver: undefined,\n  onMouseOut: undefined,\n  onMouseMove: undefined,\n  onClick: undefined,\n  onContextMenu: undefined,\n  onFeatureClick: undefined,\n  onFeatureContextMenu: undefined,\n}\n\nexport default observer(SvgFeatureRendering)\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport { types } from 'mobx-state-tree'\n\nexport default ConfigurationSchema(\n  'SvgFeatureRenderer',\n  {\n    color1: {\n      type: 'color',\n      description: 'the main color of each feature',\n      defaultValue: 'goldenrod',\n      contextVariable: ['feature'],\n    },\n    color2: {\n      type: 'color',\n      description:\n        'the secondary color of each feature, used for connecting lines, etc',\n      defaultValue: 'black',\n      contextVariable: ['feature'],\n    },\n    color3: {\n      type: 'color',\n      description:\n        'the tertiary color of each feature, often used for contrasting fills, like on UTRs',\n      defaultValue: '#357089',\n      contextVariable: ['feature'],\n    },\n    height: {\n      type: 'number',\n      description: 'height in pixels of the main body of each feature',\n      defaultValue: 10,\n      contextVariable: ['feature'],\n    },\n    showLabels: {\n      type: 'boolean',\n      defaultValue: true,\n    },\n    labels: ConfigurationSchema('SvgFeatureLabels', {\n      name: {\n        type: 'string',\n        description:\n          'the primary name of the feature to show, if space is available',\n        defaultValue: `jexl:get(feature,'name') || get(feature,'id')`,\n        contextVariable: ['feature'],\n      },\n      nameColor: {\n        type: 'color',\n        description: 'the color of the name label, if shown',\n        defaultValue: 'black',\n        contextVariable: ['feature'],\n      },\n      description: {\n        type: 'string',\n        description: 'the text description to show, if space is available',\n        defaultValue: `jexl:get(feature,'note') || get(feature,'description')`,\n        contextVariable: ['feature'],\n      },\n      descriptionColor: {\n        type: 'color',\n        description: 'the color of the description, if shown',\n        defaultValue: 'blue',\n        contextVariable: ['feature'],\n      },\n      fontSize: {\n        type: 'number',\n        description:\n          'height in pixels of the text to use for names and descriptions',\n        defaultValue: 13,\n        contextVariable: ['feature'],\n      },\n    }),\n    displayMode: {\n      type: 'stringEnum',\n      model: types.enumeration('displayMode', [\n        'normal',\n        'compact',\n        'reducedRepresentation',\n        'collapse',\n      ]),\n      description: 'Alternative display modes',\n      defaultValue: 'normal',\n    },\n    maxFeatureGlyphExpansion: {\n      type: 'number',\n      description:\n        \"maximum number of pixels on each side of a feature's bounding coordinates that a glyph is allowed to use\",\n      defaultValue: 500,\n    },\n    maxHeight: {\n      type: 'integer',\n      description: 'the maximum height to be used in a svg rendering',\n      defaultValue: 600,\n    },\n    subParts: {\n      type: 'string',\n      description: 'subparts for a glyph',\n      defaultValue: 'CDS,UTR,five_prime_UTR,three_prime_UTR',\n    },\n    impliedUTRs: {\n      type: 'boolean',\n      description: 'imply UTR from the exon and CDS differences',\n      defaultValue: false,\n    },\n  },\n  { explicitlyTyped: true },\n)\n","import BoxRendererType from '@jbrowse/core/pluggableElementTypes/renderers/BoxRendererType'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport {\n  configSchema as svgFeatureRendererConfigSchema,\n  ReactComponent as SvgFeatureRendererReactComponent,\n} from './SvgFeatureRenderer'\n\nclass SvgFeatureRenderer extends BoxRendererType {\n  supportsSVG = true\n}\n\nexport default class SVGPlugin extends Plugin {\n  name = 'SVGPlugin'\n\n  install(pluginManager: PluginManager) {\n    pluginManager.addRendererType(\n      () =>\n        new SvgFeatureRenderer({\n          name: 'SvgFeatureRenderer',\n          ReactComponent: SvgFeatureRendererReactComponent,\n          configSchema: svgFeatureRendererConfigSchema,\n          pluginManager,\n        }),\n    )\n  }\n}\n\nexport { svgFeatureRendererConfigSchema, SvgFeatureRendererReactComponent }\n"],"names":["Label","props","text","x","y","color","fontHeight","featureWidth","reversed","allowedWidthExpansion","fontWidthScaleFactor","fontWidth","totalWidth","Infinity","measuredTextWidth","measureText","React","style","fontSize","fill","cursor","slice","FeatureGlyph","feature","rootLayout","selected","config","name","shouldShowName","description","shouldShowDescription","featureLayout","getSubRecord","String","id","GlyphComponent","data","glyphComponents","push","FeatureLabel","absolute","left","top","readConfObject","width","propTypes","PropTypes","shape","func","isRequired","get","layout","addRect","getTotalHeight","addChild","region","CommonPropTypes","Region","bpPerPx","number","bool","ConfigSchema","string","movedDuringLastMouseDown","defaultProps","undefined","observer","OverlayRect","rect","rectProps","leftBp","topPx","rightBp","bottomPx","bpSpanPx","leftPx","rightPx","rectTop","Math","round","screenWidth","end","start","rectHeight","leftWithinBlock","max","diff","widthWithinBlock","min","height","SvgOverlay","displayModel","blockLayoutFeatures","selectedFeatureId","featureIdUnderMouse","contextMenuFeature","blockKey","handlers","blockLayout","mouseoverFeatureId","onFeatureMouseDown","event","handler","onFeatureMouseEnter","onFeatureMouseOut","onFeatureMouseOver","onFeatureMouseUp","onFeatureMouseLeave","onFeatureMouseMove","onFeatureClick","stopPropagation","onFeatureContextMenu","fillOpacity","onMouseDown","onMouseEnter","onMouseOut","onMouseOver","onMouseUp","onMouseLeave","onMouseMove","onClick","onContextMenu","onFocus","onBlur","stroke","Box","color1","emphasizedColor1","emphasize","error","color2","ReactPropTypes","utrHeightFraction","Chevron","isUTR","strand","direction","emphasizedColor","Segments","subfeaturesProp","subfeatures","emphasizedColor2","points","map","subfeature","subfeatureId","subfeatureLayout","ProcessedTranscript","getSubparts","makeSubpartsFilter","confKey","filter","split","Array","isArray","typeNames","typeName","toLowerCase","includes","filterSubpart","test","makeUTRs","parent","subs","subparts","codeStart","codeEnd","haveLeftUTR","haveRightUTR","exons","i","length","type","sort","a","b","unshift","SimpleFeature","f","c","hasUTRs","find","child","isTranscript","impliedUTRs","element","layOut","subLayout","layOutFeature","layOutSubfeatures","Subfeatures","displayMode","topOffset","forEach","SubfeatureGlyphComponent","chooseGlyphComponent","subfeatureHeight","subSubLayout","move","hasSubSub","transcriptTypes","args","parentFeature","layoutParent","renderingStyle","position","padding","RenderedFeatureGlyph","startPx","bpToPx","labelsAllowed","SceneGraph","expansion","showLabels","textVerticalPadding","nameWidth","bottom","descriptionWidth","aboveLayout","RenderedFeatures","features","featuresRendered","values","oneOfType","instanceOf","Map","arrayOf","SvgFeatureRendering","regions","exportSVG","ref","useRef","useState","mouseIsDown","setMouseIsDown","setMovedDuringLastMouseDown","setHeight","mouseDown","useCallback","mouseUp","mouseEnter","mouseLeave","mouseOver","mouseOut","mouseMove","offsetX","offsetY","current","getBoundingClientRect","clientX","clientY","px","clientBp","featureIdCurrentlyUnderMouse","getFeatureOverlapping","click","useEffect","display","configuration","ConfigurationSchema","defaultValue","contextVariable","color3","labels","nameColor","descriptionColor","model","types","enumeration","maxFeatureGlyphExpansion","maxHeight","subParts","explicitlyTyped","SvgFeatureRenderer","BoxRendererType","SVGPlugin","pluginManager","addRendererType","ReactComponent","SvgFeatureRendererReactComponent","configSchema","svgFeatureRendererConfigSchema","Plugin"],"mappings":"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"}
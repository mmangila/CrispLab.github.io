{"version":3,"file":"plugin-bed.cjs.production.min.js","sources":["../src/BigBedAdapter/configSchema.ts","../src/BedTabixAdapter/configSchema.ts","../src/index.ts","../../../node_modules/regenerator-runtime/runtime.js","../src/util.ts","../src/BigBedAdapter/BigBedAdapter.ts","../src/BedTabixAdapter/BedTabixAdapter.ts"],"sourcesContent":["import { ConfigurationSchema } from '@jbrowse/core/configuration'\n\nexport default ConfigurationSchema(\n  'BigBedAdapter',\n  {\n    bigBedLocation: {\n      type: 'fileLocation',\n      defaultValue: { uri: '/path/to/my.bb' },\n    },\n  },\n  { explicitlyTyped: true },\n)\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport { types } from 'mobx-state-tree'\n\nexport default ConfigurationSchema(\n  'BedTabixAdapter',\n  {\n    bedGzLocation: {\n      type: 'fileLocation',\n      defaultValue: { uri: '/path/to/my.bed.gz' },\n    },\n\n    index: ConfigurationSchema('TabixIndex', {\n      indexType: {\n        model: types.enumeration('IndexType', ['TBI', 'CSI']),\n        type: 'stringEnum',\n        defaultValue: 'TBI',\n      },\n      location: {\n        type: 'fileLocation',\n        defaultValue: { uri: '/path/to/my.bed.gz.tbi' },\n      },\n    }),\n\n    columnNames: {\n      type: 'stringArray',\n      description: 'List of column names',\n      defaultValue: [],\n    },\n\n    scoreColumn: {\n      type: 'string',\n      description: 'The column to use as a \"score\" attribute',\n      defaultValue: '',\n    },\n\n    autoSql: {\n      type: 'string',\n      description: 'The autoSql definition for the data fields in the file',\n      defaultValue: '',\n    },\n  },\n  { explicitlyTyped: true },\n)\n","import AdapterType from '@jbrowse/core/pluggableElementTypes/AdapterType'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { configSchema as bigBedAdapterConfigSchema } from './BigBedAdapter'\nimport { configSchema as bedTabixAdapterConfigSchema } from './BedTabixAdapter'\n\nexport default class BedPlugin extends Plugin {\n  name = 'BedPlugin'\n\n  install(pluginManager: PluginManager) {\n    pluginManager.addAdapterType(\n      () =>\n        new AdapterType({\n          name: 'BigBedAdapter',\n          configSchema: bigBedAdapterConfigSchema,\n          getAdapterClass: () =>\n            import('./BigBedAdapter/BigBedAdapter').then(r => r.default),\n        }),\n    )\n    pluginManager.addAdapterType(\n      () =>\n        new AdapterType({\n          name: 'BedTabixAdapter',\n          configSchema: bedTabixAdapterConfigSchema,\n          getAdapterClass: () =>\n            import('./BedTabixAdapter/BedTabixAdapter').then(r => r.default),\n        }),\n    )\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import SimpleFeature, { Feature } from '@jbrowse/core/util/simpleFeature'\n\nexport function ucscProcessedTranscript(feature: Feature) {\n  const children = feature.children()\n  // split the blocks into UTR, CDS, and exons\n  const thickStart = feature.get('thickStart')\n  const thickEnd = feature.get('thickEnd')\n\n  if (!thickStart && !thickEnd) {\n    return feature\n  }\n\n  const blocks: Feature[] = children\n    ? children\n        .filter(child => child.get('type') === 'block')\n        .sort((a, b) => a.get('start') - b.get('start'))\n    : []\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const newChildren: Record<string, any> = []\n  blocks.forEach(block => {\n    const start = block.get('start')\n    const end = block.get('end')\n    if (thickStart >= end) {\n      // left-side UTR\n      const prime = feature.get('strand') > 0 ? 'five' : 'three'\n      newChildren.push({\n        type: `${prime}_prime_UTR`,\n        start,\n        end,\n      })\n    } else if (thickStart > start && thickStart < end && thickEnd >= end) {\n      // UTR | CDS\n      const prime = feature.get('strand') > 0 ? 'five' : 'three'\n      newChildren.push(\n        {\n          type: `${prime}_prime_UTR`,\n          start,\n          end: thickStart,\n        },\n        {\n          type: 'CDS',\n          start: thickStart,\n          end,\n        },\n      )\n    } else if (thickStart <= start && thickEnd >= end) {\n      // CDS\n      newChildren.push({\n        type: 'CDS',\n        start,\n        end,\n      })\n    } else if (thickStart > start && thickStart < end && thickEnd < end) {\n      // UTR | CDS | UTR\n      const leftPrime = feature.get('strand') > 0 ? 'five' : 'three'\n      const rightPrime = feature.get('strand') > 0 ? 'three' : 'five'\n      newChildren.push(\n        {\n          type: `${leftPrime}_prime_UTR`,\n          start,\n          end: thickStart,\n        },\n        {\n          type: `CDS`,\n          start: thickStart,\n          end: thickEnd,\n        },\n        {\n          type: `${rightPrime}_prime_UTR`,\n          start: thickEnd,\n          end,\n        },\n      )\n    } else if (thickStart <= start && thickEnd > start && thickEnd < end) {\n      // CDS | UTR\n      const prime = feature.get('strand') > 0 ? 'three' : 'five'\n      newChildren.push(\n        {\n          type: `CDS`,\n          start,\n          end: thickEnd,\n        },\n        {\n          type: `${prime}_prime_UTR`,\n          start: thickEnd,\n          end,\n        },\n      )\n    } else if (thickEnd <= start) {\n      // right-side UTR\n      const prime = feature.get('strand') > 0 ? 'three' : 'five'\n      newChildren.push({\n        type: `${prime}_prime_UTR`,\n        start,\n        end,\n      })\n    }\n  })\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const newData: Record<string, any> = {}\n  feature.tags().forEach(tag => {\n    newData[tag] = feature.get(tag)\n  })\n  newData.subfeatures = newChildren\n  newData.type = 'mRNA'\n  newData.uniqueId = feature.id()\n  delete newData.chromStarts\n  delete newData.chromStart\n  delete newData.chromEnd\n  delete newData.chrom\n  delete newData.blockStarts\n  delete newData.blockSizes\n  delete newData.blockCount\n  delete newData.thickStart\n  delete newData.thickEnd\n  const newFeature = new SimpleFeature({\n    data: newData,\n    id: feature.id(),\n  })\n  return newFeature\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { BigBed } from '@gmod/bbi'\nimport BED from '@gmod/bed'\nimport {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport { Region, FileLocation } from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport SimpleFeature, { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { map, mergeAll } from 'rxjs/operators'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport { Instance } from 'mobx-state-tree'\nimport configSchema from './configSchema'\nimport { ucscProcessedTranscript } from '../util'\n\ninterface BEDFeature {\n  chrom: string\n  chromStart: number\n  chromEnd: number\n  [key: string]: any\n}\n\ninterface Parser {\n  parseLine: (line: string, opts: { uniqueId: string | number }) => BEDFeature\n}\n\nexport default class BigBedAdapter extends BaseFeatureDataAdapter {\n  private bigbed: BigBed\n\n  private parser: Promise<Parser>\n\n  public constructor(config: Instance<typeof configSchema>) {\n    super(config)\n    const bigBedLocation = readConfObject(\n      config,\n      'bigBedLocation',\n    ) as FileLocation\n    this.bigbed = new BigBed({\n      filehandle: openLocation(bigBedLocation),\n    })\n\n    this.parser = this.bigbed\n      .getHeader()\n      .then(({ autoSql }: { autoSql: string }) => new BED({ autoSql }))\n  }\n\n  public async getRefNames() {\n    return Object.keys((await this.bigbed.getHeader()).refsByName)\n  }\n\n  async getHeader(opts?: BaseOptions) {\n    const { version, fileType } = await this.bigbed.getHeader(opts)\n    // @ts-ignore\n    const { autoSql } = await this.parser\n    const { fields, ...rest } = autoSql\n    const f = Object.fromEntries(\n      // @ts-ignore\n      fields.map(({ name, comment }) => [name, comment]),\n    )\n    return { version, fileType, autoSql: { ...rest }, fields: f }\n  }\n\n  public async refIdToName(refId: number) {\n    return ((await this.bigbed.getHeader()).refsByNumber[refId] || {}).name\n  }\n\n  public getFeatures(region: Region, opts: BaseOptions = {}) {\n    const { refName, start, end } = region\n    const { signal } = opts\n    return ObservableCreate<Feature>(async observer => {\n      try {\n        const parser = await this.parser\n        const ob = await this.bigbed.getFeatureStream(refName, start, end, {\n          signal,\n          basesPerSpan: end - start,\n        })\n        ob.pipe(\n          mergeAll(),\n          map(\n            (r: {\n              start: number\n              end: number\n              rest?: string\n              uniqueId?: string\n            }) => {\n              const data = parser.parseLine(\n                `${refName}\\t${r.start}\\t${r.end}\\t${r.rest}`,\n                {\n                  uniqueId: r.uniqueId as string,\n                },\n              )\n\n              const { blockCount, blockSizes, blockStarts, chromStarts } = data\n              if (blockCount) {\n                const starts = chromStarts || blockStarts || []\n                const sizes = blockSizes\n                const blocksOffset = r.start\n                data.subfeatures = []\n\n                for (let b = 0; b < blockCount; b += 1) {\n                  const bmin = (starts[b] || 0) + blocksOffset\n                  const bmax = bmin + (sizes[b] || 0)\n                  data.subfeatures.push({\n                    uniqueId: `${r.uniqueId}-${b}`,\n                    start: bmin,\n                    end: bmax,\n                    type: 'block',\n                  })\n                }\n              }\n              if (r.uniqueId === undefined) {\n                throw new Error('invalid bbi feature')\n              }\n              delete data.chromStart\n              delete data.chromEnd\n              delete data.chrom\n\n              const f = new SimpleFeature({\n                id: `${this.id}-${r.uniqueId}`,\n                data: {\n                  ...data,\n                  start: r.start,\n                  end: r.end,\n                  refName,\n                },\n              })\n\n              // collection of heuristics for suggesting that this feature\n              // should be converted to a gene, CNV bigbed has many gene like\n              // features including thickStart and blockCount but no strand\n              return f.get('thickStart') &&\n                f.get('blockCount') &&\n                f.get('strand') !== 0\n                ? ucscProcessedTranscript(f)\n                : f\n            },\n          ),\n        ).subscribe(observer)\n      } catch (e) {\n        observer.error(e)\n      }\n    }, opts.signal)\n  }\n\n  public freeResources(): void {}\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport BED from '@gmod/bed'\nimport {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport { FileLocation, Region } from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport SimpleFeature, { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { TabixIndexedFile } from '@gmod/tabix'\nimport { Instance } from 'mobx-state-tree'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport { ucscProcessedTranscript } from '../util'\nimport MyConfigSchema from './configSchema'\n\nexport default class BedTabixAdapter extends BaseFeatureDataAdapter {\n  private parser: any\n\n  protected bed: TabixIndexedFile\n\n  protected columnNames: string[]\n\n  protected scoreColumn: string\n\n  public static capabilities = ['getFeatures', 'getRefNames']\n\n  public constructor(config: Instance<typeof MyConfigSchema>) {\n    super(config)\n    const bedGzLocation = readConfObject(\n      config,\n      'bedGzLocation',\n    ) as FileLocation\n    const index = readConfObject(config, 'index') as {\n      indexType?: string\n      location: FileLocation\n    }\n    const autoSql = readConfObject(config, 'autoSql') as string\n    const { location, indexType } = index\n\n    this.bed = new TabixIndexedFile({\n      filehandle: openLocation(bedGzLocation),\n      csiFilehandle: indexType === 'CSI' ? openLocation(location) : undefined,\n      tbiFilehandle: indexType !== 'CSI' ? openLocation(location) : undefined,\n      chunkCacheSize: 50 * 2 ** 20,\n    })\n    this.columnNames = readConfObject(config, 'columnNames')\n    this.scoreColumn = readConfObject(config, 'scoreColumn')\n    this.parser = new BED({ autoSql })\n  }\n\n  public async getRefNames(opts: BaseOptions = {}) {\n    return this.bed.getReferenceSequenceNames(opts)\n  }\n\n  async getHeader() {\n    return this.bed.getHeader()\n  }\n\n  defaultParser(fields: string[], line: string) {\n    return Object.fromEntries(line.split('\\t').map((f, i) => [fields[i], f]))\n  }\n\n  async getNames() {\n    if (this.columnNames.length) {\n      return this.columnNames\n    }\n    const header = await this.bed.getHeader()\n    const defs = header.split('\\n').filter(f => !!f)\n    const defline = defs[defs.length - 1]\n    return defline && defline.includes('\\t')\n      ? defline\n          .slice(1)\n          .split('\\t')\n          .map(field => field.trim())\n      : null\n  }\n\n  public getFeatures(query: Region, opts: BaseOptions = {}) {\n    return ObservableCreate<Feature>(async observer => {\n      const meta = await this.bed.getMetadata()\n      const { columnNumbers } = meta\n      const colRef = columnNumbers.ref - 1\n      const colStart = columnNumbers.start - 1\n      const colEnd = columnNumbers.end - 1\n      // colSame handles special case for tabix where a single column is both\n      // the start and end, this is assumed to be covering the base at this\n      // position (e.g. tabix -s 1 -b 2 -e 2) begin and end are same\n      const colSame = colStart === colEnd ? 1 : 0\n      const names = await this.getNames()\n      await this.bed.getLines(query.refName, query.start, query.end, {\n        lineCallback: (line: string, fileOffset: number) => {\n          const l = line.split('\\t')\n          const refName = l[colRef]\n          const start = +l[colStart]\n\n          const end = +l[colEnd] + colSame\n          const uniqueId = `${this.id}-${fileOffset}`\n          const data = names\n            ? this.defaultParser(names, line)\n            : this.parser.parseLine(line, { uniqueId })\n\n          const { blockCount, blockSizes, blockStarts, chromStarts } = data\n\n          if (blockCount) {\n            const starts = chromStarts || blockStarts || []\n            const sizes = blockSizes\n            const blocksOffset = start\n            data.subfeatures = []\n\n            for (let b = 0; b < blockCount; b += 1) {\n              const bmin = (starts[b] || 0) + blocksOffset\n              const bmax = bmin + (sizes[b] || 0)\n              data.subfeatures.push({\n                uniqueId: `${uniqueId}-${b}`,\n                start: bmin,\n                end: bmax,\n                type: 'block',\n              })\n            }\n          }\n\n          if (this.scoreColumn) {\n            data.score = data[this.scoreColumn]\n          }\n          delete data.chrom\n          delete data.chromStart\n          delete data.chromEnd\n          const f = new SimpleFeature({\n            ...data,\n            start,\n            end,\n            refName,\n            uniqueId,\n          })\n          const r = f.get('thickStart') ? ucscProcessedTranscript(f) : f\n          observer.next(r)\n        },\n        signal: opts.signal,\n      })\n      observer.complete()\n    }, opts.signal)\n  }\n\n  public freeResources(): void {}\n}\n"],"names":["ConfigurationSchema","bigBedLocation","type","defaultValue","uri","explicitlyTyped","bedGzLocation","index","indexType","model","types","enumeration","location","columnNames","description","scoreColumn","autoSql","BedPlugin","Plugin","pluginManager","addAdapterType","AdapterType","name","configSchema","bigBedAdapterConfigSchema","getAdapterClass","Promise","then","r","bedTabixAdapterConfigSchema","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","ucscProcessedTranscript","feature","children","thickStart","get","thickEnd","blocks","filter","child","sort","a","b","newChildren","block","start","end","prime","leftPrime","rightPrime","newData","tags","tag","subfeatures","uniqueId","id","chromStarts","chromStart","chromEnd","chrom","blockStarts","blockSizes","blockCount","SimpleFeature","data","BaseFeatureDataAdapter","config","readConfObject","bigbed","BigBed","filehandle","openLocation","parser","_this","getHeader","BED","refsByName","opts","version","fileType","fields","rest","f","fromEntries","map","comment","refId","refsByNumber","region","refName","signal","ObservableCreate","observer","_this2","getFeatureStream","basesPerSpan","pipe","mergeAll","parseLine","starts","sizes","blocksOffset","bmin","bmax","subscribe","BedTabixAdapter","bed","TabixIndexedFile","csiFilehandle","tbiFilehandle","chunkCacheSize","getReferenceSequenceNames","line","split","defs","defline","includes","field","trim","query","getMetadata","colRef","columnNumbers","ref","colSame","colStart","colEnd","getNames","names","getLines","lineCallback","fileOffset","l","defaultParser","score"],"mappings":"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"}
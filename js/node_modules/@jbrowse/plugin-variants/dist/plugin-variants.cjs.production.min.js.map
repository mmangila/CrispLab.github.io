{"version":3,"file":"plugin-variants.cjs.production.min.js","sources":["../src/ChordVariantDisplay/models/ChordVariantDisplay.js","../src/ChordVariantDisplay/index.ts","../../../node_modules/regenerator-runtime/runtime.js","../src/LinearVariantDisplay/model.ts","../src/StructuralVariantChordRenderer/ReactComponent.js","../src/StructuralVariantChordRenderer/index.js","../src/VariantFeatureWidget/index.js","../src/VcfTabixAdapter/configSchema.ts","../src/VcfAdapter/configSchema.ts","../src/VcfTabixAdapter/VcfFeature.ts","../src/index.ts","../src/LinearVariantDisplay/configSchema.ts","../src/VcfTabixAdapter/VcfTabixAdapter.ts","../src/VcfAdapter/VcfAdapter.ts","../src/VariantFeatureWidget/BreakendOptionDialog.tsx","../src/VariantFeatureWidget/VariantFeatureWidget.tsx"],"sourcesContent":["import {\n  baseChordDisplayConfig,\n  BaseChordDisplayModel,\n} from '@jbrowse/plugin-circular-view'\n\nconst ChordVariantDisplayF = pluginManager => {\n  const { jbrequire } = pluginManager\n\n  const { types } = jbrequire('mobx-state-tree')\n  const { ConfigurationSchema, ConfigurationReference } = jbrequire(\n    '@jbrowse/core/configuration',\n  )\n  const { getContainingView } = jbrequire('@jbrowse/core/util')\n  const { getParentRenderProps } = jbrequire('@jbrowse/core/util/tracks')\n  const configSchema = ConfigurationSchema(\n    'ChordVariantDisplay',\n    {\n      renderer: types.optional(\n        pluginManager.pluggableConfigSchemaType('renderer'),\n        { type: 'StructuralVariantChordRenderer' },\n      ),\n    },\n    { baseConfiguration: baseChordDisplayConfig, explicitlyTyped: true },\n  )\n\n  const stateModel = types\n    .compose(\n      'ChordVariantDisplay',\n      BaseChordDisplayModel,\n      types.model({\n        type: types.literal('ChordVariantDisplay'),\n        configuration: ConfigurationReference(configSchema),\n      }),\n    )\n    .views(self => ({\n      get rendererTypeName() {\n        return self.configuration.renderer.type\n      },\n      get renderProps() {\n        const view = getContainingView(self)\n        return {\n          ...getParentRenderProps(self),\n          rpcDriverName: self.rpcDriverName,\n          displayModel: self,\n          bezierRadius: view.radiusPx * self.bezierRadiusRatio,\n          radius: view.radiusPx,\n          blockDefinitions: this.blockDefinitions,\n          config: self.configuration.renderer,\n          onChordClick: self.onChordClick,\n        }\n      },\n    }))\n\n  return { stateModel, configSchema }\n}\n\n// http://localhost:3000/test_data/hs37d5.HG002-SequelII-CCS.sv.vcf.gz.tbi\n\n// render request is for 1.5x the current viewing window\n\n// tracks all have a height\n//\nexport default ChordVariantDisplayF\n","import PluginManager from '@jbrowse/core/PluginManager'\nimport { BaseChordDisplayComponentFactory } from '@jbrowse/plugin-circular-view'\nimport ChordVariantDisplay from './models/ChordVariantDisplay'\n\nexport default (pluginManager: PluginManager) => {\n  const { lib, load } = pluginManager\n  const DisplayType = lib['@jbrowse/core/pluggableElementTypes/DisplayType']\n\n  const { stateModel, configSchema } = load(ChordVariantDisplay)\n\n  return new DisplayType({\n    name: 'ChordVariantDisplay',\n    configSchema,\n    stateModel,\n    trackType: 'VariantTrack',\n    viewType: 'CircularView',\n    ReactComponent: BaseChordDisplayComponentFactory(pluginManager),\n  })\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { getConf, ConfigurationReference } from '@jbrowse/core/configuration'\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks'\nimport {\n  getContainingTrack,\n  getSession,\n  getContainingView,\n  isSessionModelWithWidgets,\n} from '@jbrowse/core/util'\n\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { linearBasicDisplayModelFactory } from '@jbrowse/plugin-linear-genome-view'\nimport { types } from 'mobx-state-tree'\nimport { LinearVariantDisplayConfigModel } from './configSchema'\n\nexport default function (configSchema: LinearVariantDisplayConfigModel) {\n  return types\n    .compose(\n      'LinearVariantDisplay',\n      linearBasicDisplayModelFactory(configSchema),\n      types.model({\n        type: types.literal('LinearVariantDisplay'),\n        configuration: ConfigurationReference(configSchema),\n      }),\n    )\n    .actions(self => ({\n      async selectFeature(feature: Feature) {\n        const session = getSession(self)\n        if (isSessionModelWithWidgets(session)) {\n          const { rpcManager } = session\n          const sessionId = getRpcSessionId(self)\n          const track = getContainingTrack(self)\n          const adapterConfig = getConf(track, 'adapter')\n          const header = await rpcManager.call(sessionId, 'CoreGetMetadata', {\n            adapterConfig,\n          })\n          const featureWidget = session.addWidget(\n            'VariantFeatureWidget',\n            'variantFeature',\n            {\n              featureData: feature.toJSON(),\n              view: getContainingView(self),\n              descriptions: header,\n            },\n          )\n          session.showWidget(featureWidget)\n        }\n\n        session.setSelection(feature)\n      },\n    }))\n}\n","const ChordRendererF = ({ jbrequire }) => {\n  const React = jbrequire('react')\n  const { useMemo } = jbrequire('react')\n  const { observer, PropTypes: MobxPropTypes } = jbrequire('mobx-react')\n  const { polarToCartesian } = jbrequire('@jbrowse/core/util')\n  const { readConfObject } = jbrequire('@jbrowse/core/configuration')\n\n  const { PropTypes: CommonPropTypes } = jbrequire(\n    '@jbrowse/core/util/types/mst',\n  )\n  const PropTypes = jbrequire('prop-types')\n\n  function bpToRadians(block, pos) {\n    const blockStart = block.region.elided ? 0 : block.region.start\n    const blockEnd = block.region.elided ? 0 : block.region.end\n    const bpOffset = block.flipped ? blockEnd - pos : pos - blockStart\n    const radians = bpOffset / block.bpPerRadian + block.startRadians\n    return radians\n  }\n\n  const Chord = observer(function Chord({\n    feature,\n    blocksForRefs,\n    radius,\n    config,\n    bezierRadius,\n    selected,\n    onClick,\n  }) {\n    // find the blocks that our start and end points belong to\n    const startBlock = blocksForRefs[feature.get('refName')]\n    if (!startBlock) {\n      return null\n    }\n    let svType\n    if (feature.get('INFO')) {\n      ;[svType] = feature.get('INFO').SVTYPE || []\n    } else if (feature.get('mate')) {\n      svType = 'mate'\n    }\n    let endPosition\n    let endBlock\n    if (svType === 'BND') {\n      // VCF BND\n      const breakendSpecification = (feature.get('ALT') || [])[0]\n      const matePosition = breakendSpecification.MatePosition.split(':')\n      endPosition = parseInt(matePosition[1], 10)\n      endBlock = blocksForRefs[matePosition[0]]\n    } else if (svType === 'TRA') {\n      // VCF TRA\n      const chr2 = ((feature.get('INFO') || {}).CHR2 || [])[0]\n      const end = ((feature.get('INFO') || {}).END || [])[0]\n      endPosition = parseInt(end, 10)\n      endBlock = blocksForRefs[chr2]\n    } else if (svType === 'mate') {\n      // generic simplefeatures arcs\n      const mate = feature.get('mate')\n      const chr2 = mate.refName\n      endPosition = mate.start\n      endBlock = blocksForRefs[chr2]\n    }\n    if (endBlock) {\n      const startPos = feature.get('start')\n      const startRadians = bpToRadians(startBlock, startPos)\n      const endRadians = bpToRadians(endBlock, endPosition)\n      const startXY = polarToCartesian(radius, startRadians)\n      const endXY = polarToCartesian(radius, endRadians)\n      const controlXY = polarToCartesian(\n        bezierRadius,\n        (endRadians + startRadians) / 2,\n      )\n\n      let strokeColor\n      if (selected) {\n        strokeColor = readConfObject(config, 'strokeColorSelected', { feature })\n      } else {\n        strokeColor = readConfObject(config, 'strokeColor', { feature })\n      }\n      const hoverStrokeColor = readConfObject(config, 'strokeColorHover', {\n        feature,\n      })\n      return (\n        <path\n          data-testid={`chord-${feature.id()}`}\n          d={['M', ...startXY, 'Q', ...controlXY, ...endXY].join(' ')}\n          style={{ stroke: strokeColor }}\n          onClick={evt =>\n            onClick(feature, startBlock.region, endBlock.region, evt)\n          }\n          onMouseOver={evt => {\n            if (!selected) {\n              evt.target.style.stroke = hoverStrokeColor\n            }\n          }}\n          onMouseOut={evt => {\n            if (!selected) {\n              evt.target.style.stroke = strokeColor\n            }\n          }}\n        />\n      )\n    }\n\n    return null\n  })\n\n  function StructuralVariantChords(props) {\n    const {\n      features,\n      config,\n      displayModel,\n      blockDefinitions,\n      radius,\n      bezierRadius,\n      displayModel: { selectedFeatureId },\n\n      onChordClick,\n    } = props\n    // make a map of refName -> blockDefinition\n    const blocksForRefsMemo = useMemo(() => {\n      const blocksForRefs = {}\n      blockDefinitions.forEach(block => {\n        const regions = block.region.elided\n          ? block.region.regions\n          : [block.region]\n        regions.forEach(region => {\n          blocksForRefs[region.refName] = block\n        })\n      })\n      return blocksForRefs\n    }, [blockDefinitions])\n    // console.log(blocksForRefs)\n    const chords = []\n    for (const [id, feature] of features) {\n      const selected = String(selectedFeatureId) === String(feature.id())\n      chords.push(\n        <Chord\n          key={id}\n          feature={feature}\n          config={config}\n          displayModel={displayModel}\n          radius={radius}\n          bezierRadius={bezierRadius}\n          blocksForRefs={blocksForRefsMemo}\n          selected={selected}\n          onClick={onChordClick}\n        />,\n      )\n    }\n    const trackStyleId = `chords-${displayModel.id}`\n    return (\n      <g id={trackStyleId} data-testid=\"structuralVariantChordRenderer\">\n        <style\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{\n            __html: `\n          #${trackStyleId} > path {\n            cursor: crosshair;\n            fill: none;\n          }\n`,\n          }}\n        />\n        {chords}\n      </g>\n    )\n  }\n\n  StructuralVariantChords.propTypes = {\n    features: PropTypes.instanceOf(Map).isRequired,\n    config: CommonPropTypes.ConfigSchema.isRequired,\n    displayModel: MobxPropTypes.objectOrObservableObject,\n    blockDefinitions: PropTypes.arrayOf(MobxPropTypes.objectOrObservableObject)\n      .isRequired,\n    radius: PropTypes.number.isRequired,\n    bezierRadius: PropTypes.number.isRequired,\n    selectedFeatureId: PropTypes.string,\n    onChordClick: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  }\n\n  StructuralVariantChords.defaultProps = {\n    displayModel: undefined,\n    selectedFeatureId: '',\n    onChordClick: undefined,\n  }\n\n  return observer(StructuralVariantChords)\n}\n\nexport default ChordRendererF\n","import ReactComponentFactory from './ReactComponent'\n\nconst ChordRendererConfigF = pluginManager => {\n  const { jbrequire } = pluginManager\n  const ChordRendererType = jbrequire(\n    '@jbrowse/core/pluggableElementTypes/renderers/CircularChordRendererType',\n  )\n  const { ConfigurationSchema } = jbrequire('@jbrowse/core/configuration')\n\n  const ReactComponent = jbrequire(ReactComponentFactory)\n  const configSchema = ConfigurationSchema(\n    'StructuralVariantChordRenderer',\n    {\n      strokeColor: {\n        type: 'color',\n        description: 'the line color of each arc',\n        defaultValue: 'rgba(255,133,0,0.32)',\n        contextVariable: ['feature'],\n      },\n      strokeColorSelected: {\n        type: 'color',\n        description: 'the line color of an arc that has been selected',\n        defaultValue: 'black',\n        contextVariable: ['feature'],\n      },\n      strokeColorHover: {\n        type: 'color',\n        description:\n          'the line color of an arc that is being hovered over with the mouse',\n        defaultValue: '#555',\n        contextVariable: ['feature'],\n      },\n    },\n    { explicitlyTyped: true },\n  )\n  return new ChordRendererType({\n    name: 'StructuralVariantChordRenderer',\n    ReactComponent,\n    configSchema,\n    pluginManager,\n  })\n}\n\nexport default ChordRendererConfigF\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport { ElementId } from '@jbrowse/core/util/types/mst'\nimport { types } from 'mobx-state-tree'\n\nexport const configSchema = ConfigurationSchema('VariantFeatureWidget', {})\n\nexport function stateModelFactory(pluginManager) {\n  return types\n    .model('VariantFeatureWidget', {\n      id: ElementId,\n      type: types.literal('VariantFeatureWidget'),\n      view: types.safeReference(\n        pluginManager.pluggableMstType('view', 'stateModel'),\n      ),\n      featureData: types.frozen(),\n      descriptions: types.frozen(),\n    })\n    .actions(self => ({\n      setFeatureData(data) {\n        self.featureData = data\n      },\n      clearFeatureData() {\n        self.featureData = undefined\n      },\n    }))\n}\n","import { types } from 'mobx-state-tree'\nimport { ConfigurationSchema } from '@jbrowse/core/configuration'\n\nexport default ConfigurationSchema(\n  'VcfTabixAdapter',\n  {\n    vcfGzLocation: {\n      type: 'fileLocation',\n      defaultValue: { uri: '/path/to/my.vcf.gz' },\n    },\n    index: ConfigurationSchema('VcfIndex', {\n      indexType: {\n        model: types.enumeration('IndexType', ['TBI', 'CSI']),\n        type: 'stringEnum',\n        defaultValue: 'TBI',\n      },\n      location: {\n        type: 'fileLocation',\n        defaultValue: { uri: '/path/to/my.vcf.gz.tbi' },\n      },\n    }),\n  },\n  { explicitlyTyped: true },\n)\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\n\nexport default ConfigurationSchema(\n  'VcfAdapter',\n  {\n    vcfLocation: {\n      type: 'fileLocation',\n      defaultValue: { uri: '/path/to/my.vcf' },\n    },\n  },\n  { explicitlyTyped: true },\n)\n","import { Feature } from '@jbrowse/core/util/simpleFeature'\n\n/* eslint-disable no-underscore-dangle */\n\n/**\n * VCF Feature creation with lazy genotype evaluation.\n */\ninterface Samples {\n  [key: string]: {\n    [key: string]: { values: string[] | number[] | null }\n  }\n}\nexport interface Breakend {\n  MateDirection: string\n  Replacement: string\n  MatePosition: string\n  Join: string\n}\ninterface FeatureData {\n  [key: string]: unknown\n  refName: string\n  start: number\n  end: number\n  description?: string\n  type?: string\n  name?: string\n  aliases?: string[]\n  samples?: Samples\n}\n\nexport default class VCFFeature implements Feature {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private variant: any\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private parser: any\n\n  private data: FeatureData\n\n  private _id: string\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(args: { variant: any; parser: any; id: string }) {\n    this.variant = args.variant\n    this.parser = args.parser\n    this.data = this.dataFromVariant(this.variant)\n    this._id = args.id\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  get(field: string): any {\n    if (field === 'samples') {\n      return this.variant.SAMPLES\n    }\n    return this.data[field] || this.variant[field]\n  }\n\n  set(): void {}\n\n  parent(): undefined {\n    return undefined\n  }\n\n  children(): undefined {\n    return undefined\n  }\n\n  tags(): string[] {\n    const t = [\n      ...Object.keys(this.data),\n      ...Object.keys(this.variant),\n      'samples',\n    ]\n    return t\n  }\n\n  id(): string {\n    return this._id\n  }\n\n  dataFromVariant(variant: {\n    REF: string\n    POS: number\n    ALT: (string | Breakend)[]\n    CHROM: string\n    INFO: any // eslint-disable-line @typescript-eslint/no-explicit-any\n    ID: string[]\n  }): FeatureData {\n    const { REF, ALT, POS, CHROM, INFO, ID } = variant\n    const start = POS - 1\n    const [SO_term, description] = this._getSOTermAndDescription(REF, ALT)\n    const isTRA = ALT?.some(f => f === '<TRA>')\n    const isSymbolic = ALT?.some(\n      f => typeof f === 'string' && f.indexOf('<') !== -1,\n    )\n    return {\n      refName: CHROM,\n      start,\n      end: isSymbolic && INFO.END && !isTRA ? +INFO.END[0] : start + REF.length,\n      description,\n      type: SO_term,\n      name: ID ? ID[0] : undefined,\n      aliases: ID && ID.length > 1 ? variant.ID.slice(1) : undefined,\n    }\n  }\n\n  /**\n   * Get a sequence ontology (SO) term that describes the variant type\n   */\n  _getSOTermAndDescription(\n    ref: string,\n    alt: (string | Breakend)[],\n  ): [string, string] | [undefined, undefined] {\n    // it's just a remark if there are no alternate alleles\n    if (!alt || alt === []) {\n      return ['remark', 'no alternative alleles']\n    }\n\n    const soTerms: Set<string> = new Set()\n    let descriptions: Set<string> = new Set()\n    alt.forEach(a => {\n      let [soTerm, description] = this._getSOAndDescFromAltDefs(ref, a)\n\n      if (!soTerm) {\n        ;[soTerm, description] = this._getSOAndDescByExamination(ref, a)\n      }\n      if (soTerm && description) {\n        soTerms.add(soTerm)\n        descriptions.add(description)\n      }\n    })\n\n    // Combine descriptions like [\"SNV G -> A\", \"SNV G -> T\"] to [\"SNV G -> A,T\"]\n    if (descriptions.size > 1) {\n      const prefixes = new Set(\n        [...descriptions].map(desc => {\n          const prefix = desc.split('->')\n          return prefix[1] ? prefix[0] : desc\n        }),\n      )\n\n      const new_descs = [...prefixes].map(prefix => {\n        const suffixes = [...descriptions]\n          .map(desc => {\n            const pref = desc.split('-> ')\n            return pref[1] && pref[0] === prefix ? pref[1] : ''\n          })\n          .filter(f => !!f)\n\n        return suffixes.length\n          ? prefix + '-> ' + suffixes.join(',')\n          : [...descriptions].join(',')\n      })\n\n      descriptions = new Set(new_descs)\n    }\n    if (soTerms.size) {\n      return [[...soTerms].join(','), [...descriptions].join(',')]\n    }\n    return [undefined, undefined]\n  }\n\n  static _altTypeToSO: { [key: string]: string | undefined } = {\n    DEL: 'deletion',\n    INS: 'insertion',\n    DUP: 'duplication',\n    INV: 'inversion',\n    INVDUP: 'inverted duplication',\n    CNV: 'copy_number_variation',\n    TRA: 'translocation',\n    'DUP:TANDEM': 'tandem_duplication',\n    NON_REF: 'sequence_variant',\n    '*': 'sequence_variant',\n  }\n\n  _getSOAndDescFromAltDefs(\n    ref: string,\n    alt: string | Breakend,\n  ): [string, string] | [undefined, undefined] {\n    // not a symbolic ALT if doesn't begin with '<', so we'll have no definition\n    if (typeof alt === 'object') {\n      return ['breakend', alt.toString()]\n    }\n\n    if (typeof alt === 'string' && !alt.startsWith('<')) {\n      return [undefined, undefined]\n    }\n\n    // look for a definition with an SO type for this\n    let soTerm = VCFFeature._altTypeToSO[alt]\n    // if no SO term but ALT is in metadata, assume sequence_variant\n    if (!soTerm && this.parser.getMetadata('ALT', alt)) {\n      soTerm = 'sequence_variant'\n    }\n    if (soTerm) {\n      // const metaDescription = this.parser.getMetadata('ALT', alt, 'Description')\n      // const description = metaDescription\n      //   ? `${alt} - ${metaDescription}`\n      //   : this._makeDescriptionString(soTerm, ref, alt)\n      return [soTerm, alt]\n    }\n\n    // try to look for a definition for a parent term if we can\n    const modAlt = alt.split(':')\n    if (modAlt.length > 1) {\n      return this._getSOAndDescFromAltDefs(\n        ref,\n        `<${modAlt.slice(0, modAlt.length - 1).join(':')}>`,\n      )\n    }\n\n    // no parent\n    return [undefined, undefined]\n  }\n\n  _getSOAndDescByExamination(\n    ref: string,\n    alt: string | Breakend,\n  ): [string, string] {\n    if (typeof alt === 'object') {\n      return ['breakend', this._makeDescriptionString('breakend', ref, alt)]\n    }\n\n    if (ref.length === 1 && alt.length === 1) {\n      // use SNV because SO definition of SNP says abundance must be at\n      // least 1% in population, and can't be sure we meet that\n      return ['SNV', this._makeDescriptionString('SNV', ref, alt)]\n    }\n\n    if (alt.includes('<')) {\n      return ['sv', alt]\n    }\n\n    if (ref.length === alt.length) {\n      if (ref.split('').reverse().join('') === alt) {\n        return ['inversion', this._makeDescriptionString('inversion', ref, alt)]\n      }\n      return [\n        'substitution',\n        this._makeDescriptionString('substitution', ref, alt),\n      ]\n    }\n\n    if (ref.length <= alt.length) {\n      return ['insertion', this._makeDescriptionString('insertion', ref, alt)]\n    }\n\n    if (ref.length > alt.length) {\n      return ['deletion', this._makeDescriptionString('deletion', ref, alt)]\n    }\n\n    return ['indel', this._makeDescriptionString('indel', ref, alt)]\n  }\n\n  _makeDescriptionString(\n    soTerm: string,\n    ref: string,\n    alt: string | Breakend,\n  ): string {\n    return `${soTerm} ${ref} -> ${alt}`\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  toJSON(): any {\n    return {\n      uniqueId: this._id,\n      ...this.variant,\n      ...this.data,\n      samples: this.variant.SAMPLES,\n    }\n  }\n}\n","import { lazy } from 'react'\nimport { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport AdapterType from '@jbrowse/core/pluggableElementTypes/AdapterType'\nimport DisplayType from '@jbrowse/core/pluggableElementTypes/DisplayType'\nimport {\n  createBaseTrackConfig,\n  createBaseTrackModel,\n} from '@jbrowse/core/pluggableElementTypes/models'\nimport TrackType from '@jbrowse/core/pluggableElementTypes/TrackType'\nimport WidgetType from '@jbrowse/core/pluggableElementTypes/WidgetType'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { BaseLinearDisplayComponent } from '@jbrowse/plugin-linear-genome-view'\nimport ChordVariantDisplay from './ChordVariantDisplay'\nimport {\n  configSchemaFactory as linearVariantDisplayConfigSchemaFactory,\n  modelFactory as linearVariantDisplayModelFactory,\n} from './LinearVariantDisplay'\nimport StructuralVariantChordRendererFactory from './StructuralVariantChordRenderer'\nimport {\n  configSchema as variantFeatureWidgetConfigSchema,\n  stateModelFactory as variantFeatureWidgetStateModelFactory,\n} from './VariantFeatureWidget'\nimport { configSchema as vcfTabixAdapterConfigSchema } from './VcfTabixAdapter'\nimport { configSchema as vcfAdapterConfigSchema } from './VcfAdapter'\n\nexport default class VariantsPlugin extends Plugin {\n  name = 'VariantsPlugin'\n\n  install(pluginManager: PluginManager) {\n    pluginManager.addAdapterType(\n      () =>\n        new AdapterType({\n          name: 'VcfTabixAdapter',\n          configSchema: vcfTabixAdapterConfigSchema,\n          getAdapterClass: () =>\n            import('./VcfTabixAdapter/VcfTabixAdapter').then(r => r.default),\n        }),\n    )\n\n    pluginManager.addAdapterType(\n      () =>\n        new AdapterType({\n          name: 'VcfAdapter',\n          configSchema: vcfAdapterConfigSchema,\n          getAdapterClass: () =>\n            import('./VcfAdapter/VcfAdapter').then(r => r.default),\n        }),\n    )\n\n    pluginManager.addRendererType(() =>\n      pluginManager.jbrequire(StructuralVariantChordRendererFactory),\n    )\n    pluginManager.addTrackType(() => {\n      const configSchema = ConfigurationSchema(\n        'VariantTrack',\n        {},\n        { baseConfiguration: createBaseTrackConfig(pluginManager) },\n      )\n      return new TrackType({\n        name: 'VariantTrack',\n        configSchema,\n        stateModel: createBaseTrackModel(\n          pluginManager,\n          'VariantTrack',\n          configSchema,\n        ),\n      })\n    })\n\n    pluginManager.addDisplayType(() =>\n      pluginManager.jbrequire(ChordVariantDisplay),\n    )\n\n    pluginManager.addDisplayType(() => {\n      const configSchema = linearVariantDisplayConfigSchemaFactory(\n        pluginManager,\n      )\n      return new DisplayType({\n        name: 'LinearVariantDisplay',\n        configSchema,\n        stateModel: linearVariantDisplayModelFactory(configSchema),\n        trackType: 'VariantTrack',\n        viewType: 'LinearGenomeView',\n        ReactComponent: BaseLinearDisplayComponent,\n      })\n    })\n\n    pluginManager.addWidgetType(\n      () =>\n        new WidgetType({\n          name: 'VariantFeatureWidget',\n          heading: 'Feature details',\n          configSchema: variantFeatureWidgetConfigSchema,\n          stateModel: variantFeatureWidgetStateModelFactory(pluginManager),\n          ReactComponent: lazy(\n            () => import('./VariantFeatureWidget/VariantFeatureWidget'),\n          ),\n        }),\n    )\n  }\n}\n\nexport { default as VcfFeature } from './VcfTabixAdapter/VcfFeature'\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport { Instance } from 'mobx-state-tree'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { linearBasicDisplayConfigSchemaFactory } from '@jbrowse/plugin-linear-genome-view'\n\nexport function LinearVariantDisplayConfigFactory(\n  pluginManager: PluginManager,\n) {\n  const configSchema = linearBasicDisplayConfigSchemaFactory(pluginManager)\n\n  return ConfigurationSchema(\n    'LinearVariantDisplay',\n    {},\n    { baseConfiguration: configSchema, explicitlyTyped: true },\n  )\n}\n\nexport type LinearVariantDisplayConfigModel = ReturnType<\n  typeof LinearVariantDisplayConfigFactory\n>\nexport type LinearVariantDisplayConfig = Instance<\n  LinearVariantDisplayConfigModel\n>\n","import {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport {\n  FileLocation,\n  NoAssemblyRegion,\n  Region,\n} from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { TabixIndexedFile } from '@gmod/tabix'\nimport { GenericFilehandle } from 'generic-filehandle'\nimport VcfParser from '@gmod/vcf'\nimport { Observer } from 'rxjs'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport VcfFeature from './VcfFeature'\n\nexport default class extends BaseFeatureDataAdapter {\n  protected configured?: Promise<{\n    vcf: TabixIndexedFile\n    parser: typeof VcfParser\n    filehandle: GenericFilehandle\n  }>\n\n  protected async configure() {\n    if (!this.configured) {\n      const vcfGzLocation = readConfObject(this.config, 'vcfGzLocation')\n      const location = readConfObject(this.config, ['index', 'location'])\n      const indexType = readConfObject(this.config, ['index', 'indexType'])\n\n      const filehandle = openLocation(vcfGzLocation as FileLocation)\n      const isCSI = indexType === 'CSI'\n      const vcf = new TabixIndexedFile({\n        filehandle,\n        csiFilehandle: isCSI ? openLocation(location) : undefined,\n        tbiFilehandle: !isCSI ? openLocation(location) : undefined,\n        chunkCacheSize: 50 * 2 ** 20,\n        chunkSizeLimit: 1000000000,\n      })\n\n      this.configured = vcf\n        .getHeader()\n        .then(header => ({\n          filehandle,\n          vcf,\n          parser: new VcfParser({ header }),\n        }))\n        .catch(e => {\n          this.configured = undefined\n          throw e\n        })\n    }\n    return this.configured\n  }\n\n  public async getRefNames(opts: BaseOptions = {}) {\n    const { vcf } = await this.configure()\n    return vcf.getReferenceSequenceNames(opts)\n  }\n\n  async getHeader() {\n    const { vcf } = await this.configure()\n    return vcf.getHeader()\n  }\n\n  async getMetadata() {\n    const { parser } = await this.configure()\n    return parser.getMetadata()\n  }\n\n  public getFeatures(query: NoAssemblyRegion, opts: BaseOptions = {}) {\n    return ObservableCreate<Feature>(async observer => {\n      const { refName, start, end } = query\n      const { vcf, parser } = await this.configure()\n      await vcf.getLines(refName, start, end, {\n        lineCallback: (line: string, fileOffset: number) => {\n          observer.next(\n            new VcfFeature({\n              variant: parser.parseLine(line),\n              parser,\n              id: `${this.id}-vcf-${fileOffset}`,\n            }),\n          )\n        },\n        ...opts,\n      })\n      observer.complete()\n    }, opts.signal)\n  }\n\n  /**\n   * Checks if the data source has data for the given reference sequence,\n   * and then gets the features in the region if it does\n   *\n   * Currently this just calls getFeatureInRegion for each region. Adapters that\n   * are frequently called on multiple regions simultaneously may want to\n   * implement a more efficient custom version of this method.\n   *\n   * Also includes a bit of extra logging to warn when fetching a large portion\n   * of a VCF\n   * @param regions - Regions\n   * @param opts - Feature adapter options\n   * @returns Observable of Feature objects in the regions\n   */\n  public getFeaturesInMultipleRegions(\n    regions: Region[],\n    opts: BaseOptions = {},\n  ) {\n    // TODO: restore commented version below once TSDX supports Rollup v2\n    // xref: https://github.com/rollup/rollup/blob/master/CHANGELOG.md#bug-fixes-45\n    const superGetFeaturesInMultipleRegions = super.getFeaturesInMultipleRegions\n    return ObservableCreate<Feature>(async (observer: Observer<Feature>) => {\n      const bytes = await this.bytesForRegions(regions)\n      const { filehandle } = await this.configure()\n      const stat = await filehandle.stat()\n      let pct = Math.round((bytes / stat.size) * 100)\n      if (pct > 100) {\n        // this is just a bad estimate, make 100% if it goes over\n        pct = 100\n      }\n      if (pct > 60) {\n        console.warn(\n          `getFeaturesInMultipleRegions fetching ${pct}% of VCF file, but whole-file streaming not yet implemented`,\n        )\n      }\n      superGetFeaturesInMultipleRegions\n        .call(this, regions, opts)\n        .subscribe(observer)\n      // super.getFeaturesInMultipleRegions(regions, opts).subscribe(observer)\n    })\n  }\n\n  /**\n   * get the approximate number of bytes queried from the file for the given\n   * query regions\n   * @param regions - list of query regions\n   */\n  private async bytesForRegions(regions: Region[]) {\n    const { vcf } = await this.configure()\n    const blockResults = await Promise.all(\n      regions.map(region =>\n        // @ts-ignore\n        vcf.index.blocksForRange(region.refName, region.start, region.end),\n      ),\n    )\n    interface ByteRange {\n      start: number\n      end: number\n    }\n    interface VirtualOffset {\n      blockPosition: number\n    }\n    interface Block {\n      minv: VirtualOffset\n      maxv: VirtualOffset\n    }\n    const byteRanges: ByteRange[] = []\n    blockResults.forEach((blocks: Block[]) => {\n      blocks.forEach(block => {\n        const start = block.minv.blockPosition\n        const end = block.maxv.blockPosition + 64000\n        if (\n          !byteRanges.find(range => {\n            if (range.start <= end && range.end >= start) {\n              range.start = Math.min(range.start, start)\n              range.end = Math.max(range.end, end)\n              return true\n            }\n            return false\n          })\n        ) {\n          byteRanges.push({ start, end })\n        }\n      })\n    })\n\n    return byteRanges.reduce((a, b) => a + b.end - b.start + 1, 0)\n  }\n\n  public freeResources(/* { region } */): void {}\n}\n","import {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport { FileLocation, Region } from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport { AnyConfigurationModel } from '@jbrowse/core/configuration/configurationSchema'\nimport VcfFeature from '../VcfTabixAdapter/VcfFeature'\nimport VCF from '@gmod/vcf'\nimport { unzip } from '@gmod/bgzf-filehandle'\n\nconst readVcf = (f: string) => {\n  const lines = f.split('\\n')\n  const header: string[] = []\n  const refNames: string[] = []\n  const rest: string[] = []\n  lines.forEach(line => {\n    if (line.startsWith('##contig')) {\n      refNames.push(line.split('##contig=<ID=')[1].split(',')[0])\n    } else if (line.startsWith('#')) {\n      header.push(line)\n    } else if (line) {\n      rest.push(line)\n    }\n  })\n  return { header: header.join('\\n'), lines: rest, refNames }\n}\n\nexport default class VcfAdapter extends BaseFeatureDataAdapter {\n  public static capabilities = ['getFeatures', 'getRefNames']\n\n  private setupP?: Promise<Feature[]>\n\n  public constructor(config: AnyConfigurationModel) {\n    super(config)\n  }\n\n  private async decodeFileContents() {\n    const vcfLocation = readConfObject(\n      this.config,\n      'vcfLocation',\n    ) as FileLocation\n\n    let fileContents = await openLocation(vcfLocation).readFile()\n\n    if (\n      typeof fileContents[0] === 'number' &&\n      fileContents[0] === 31 &&\n      typeof fileContents[1] === 'number' &&\n      fileContents[1] === 139 &&\n      typeof fileContents[2] === 'number' &&\n      fileContents[2] === 8\n    ) {\n      fileContents = new TextDecoder().decode(await unzip(fileContents))\n    } else {\n      fileContents = fileContents.toString()\n    }\n\n    return readVcf(fileContents)\n  }\n\n  public async getLines() {\n    const { header, lines } = await this.decodeFileContents()\n\n    const parser = new VCF({ header: header })\n\n    return lines.map((line, index) => {\n      return new VcfFeature({\n        variant: parser.parseLine(line),\n        parser,\n        id: `${this.id}-vcf-${index}`,\n      })\n    })\n  }\n\n  public async setup() {\n    if (!this.setupP) {\n      this.setupP = this.getLines()\n    }\n    return this.setupP\n  }\n\n  public async getRefNames(_: BaseOptions = {}) {\n    const { refNames } = await this.decodeFileContents()\n    return refNames\n  }\n\n  public getFeatures(region: Region, opts: BaseOptions = {}) {\n    return ObservableCreate<Feature>(async observer => {\n      const feats = await this.setup()\n      feats.forEach(f => {\n        if (\n          f.get('refName') === region.refName &&\n          f.get('end') > region.start &&\n          f.get('start') < region.end\n        ) {\n          observer.next(f)\n        }\n      })\n      observer.complete()\n    }, opts.signal)\n  }\n\n  public freeResources(): void {}\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState } from 'react'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  IconButton,\n  FormControlLabel,\n  Checkbox,\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { getSnapshot } from 'mobx-state-tree'\nimport { getSession } from '@jbrowse/core/util'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\n\nconst useStyles = makeStyles(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n  block: {\n    display: 'block',\n  },\n}))\n\nfunction BreakendOptionDialog({\n  model,\n  handleClose,\n  feature,\n  viewType,\n}: {\n  model: any\n  handleClose: () => void\n  feature: Feature\n  viewType: any\n}) {\n  const classes = useStyles()\n  const [copyTracks, setCopyTracks] = useState(true)\n  const [mirrorTracks, setMirrorTracks] = useState(true)\n\n  return (\n    <Dialog open onClose={handleClose}>\n      <DialogTitle>\n        Breakpoint split view options\n        {handleClose ? (\n          <IconButton\n            className={classes.closeButton}\n            onClick={() => {\n              handleClose()\n            }}\n          >\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </DialogTitle>\n      <Divider />\n\n      <DialogContent>\n        <FormControlLabel\n          className={classes.block}\n          control={\n            <Checkbox\n              checked={copyTracks}\n              onChange={() => setCopyTracks(val => !val)}\n            />\n          }\n          label=\"Copy tracks into the new view\"\n        />\n\n        <FormControlLabel\n          className={classes.block}\n          control={\n            <Checkbox\n              checked={mirrorTracks}\n              onChange={() => setMirrorTracks(val => !val)}\n            />\n          }\n          label=\"Mirror tracks vertically in vertically stacked view\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            const { view } = model\n            const session = getSession(model)\n\n            const viewSnapshot = viewType.snapshotFromBreakendFeature(\n              feature,\n              view,\n            )\n            viewSnapshot.views[0].offsetPx -= view.width / 2 + 100\n            viewSnapshot.views[1].offsetPx -= view.width / 2 + 100\n            viewSnapshot.featureData = feature\n            const viewTracks: any = getSnapshot(view.tracks)\n            viewSnapshot.views[0].tracks = viewTracks\n            viewSnapshot.views[1].tracks = mirrorTracks\n              ? viewTracks.slice().reverse()\n              : viewTracks\n\n            session.addView('BreakpointSplitView', viewSnapshot)\n\n            handleClose()\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n          autoFocus\n        >\n          OK\n        </Button>\n        <Button\n          onClick={() => {\n            handleClose()\n          }}\n          color=\"secondary\"\n          variant=\"contained\"\n          autoFocus\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\nexport default observer(BreakendOptionDialog)\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState } from 'react'\nimport {\n  Divider,\n  Link,\n  Paper,\n  FormControlLabel,\n  Checkbox,\n  TextField,\n  Typography,\n} from '@material-ui/core'\nimport SimpleFeature, {\n  SimpleFeatureSerialized,\n} from '@jbrowse/core/util/simpleFeature'\nimport { DataGrid } from '@material-ui/data-grid'\nimport { observer } from 'mobx-react'\nimport { getSession } from '@jbrowse/core/util'\nimport { getEnv } from 'mobx-state-tree'\nimport {\n  FeatureDetails,\n  BaseCard,\n} from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail'\nimport BreakendOptionDialog from './BreakendOptionDialog'\nimport { Breakend } from '../VcfTabixAdapter/VcfFeature'\n\n// from vcf-js\nfunction toString(feat: string | Breakend) {\n  if (typeof feat === 'string') {\n    return feat\n  }\n  const char = feat.MateDirection === 'left' ? ']' : '['\n  if (feat.Join === 'left') {\n    return `${char}${feat.MatePosition}${char}${feat.Replacement}`\n  }\n  return `${feat.Replacement}${char}${feat.MatePosition}${char}`\n}\n\nfunction VariantSamples(props: any) {\n  const [filter, setFilter] = useState<any>({})\n  const [showFilters, setShowFilters] = useState(false)\n  const { feature } = props\n\n  const { samples = {} } = feature\n  const preFilteredRows: any = Object.entries(samples)\n  if (!preFilteredRows.length) {\n    return null\n  }\n  const infoFields = ['sample', ...Object.keys(preFilteredRows[0][1])].map(\n    field => ({\n      field,\n    }),\n  )\n  let error\n  let rows = []\n  const filters = Object.keys(filter)\n\n  // catch some error thrown from regex\n  // note: maps all values into a string, if this is not done rows are not\n  // sortable by the data-grid\n  try {\n    rows = preFilteredRows\n      .map((row: any) => ({\n        ...Object.fromEntries(\n          Object.entries(row[1]).map(entry => [entry[0], String(entry[1])]),\n        ),\n        sample: row[0],\n        id: row[0],\n      }))\n      .filter((row: any) => {\n        return filters.length\n          ? filters.every(key => {\n              const val = row[key]\n              const currFilter = filter[key]\n              return currFilter ? val.match(new RegExp(currFilter, 'i')) : true\n            })\n          : true\n      })\n  } catch (e) {\n    error = e\n  }\n  // disableSelectionOnClick helps avoid\n  // https://github.com/mui-org/material-ui-x/issues/1197\n  return (\n    <BaseCard {...props} title=\"Samples\">\n      {error ? <Typography color=\"error\">{`${error}`}</Typography> : null}\n\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={showFilters}\n            onChange={() => setShowFilters(f => !f)}\n          />\n        }\n        label=\"Show sample filters\"\n      />\n      {showFilters ? (\n        <>\n          <Typography>\n            These filters can use a plain text search or regex style query, e.g.\n            in the genotype field, entering 1 will query for all genotypes that\n            include the first alternate allele e.g. 0|1 or 1|1, entering\n            [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33\n          </Typography>\n          {infoFields.map(({ field }) => {\n            return (\n              <TextField\n                key={`filter-${field}`}\n                placeholder={`Filter ${field}`}\n                value={filter[field] || ''}\n                onChange={event =>\n                  setFilter({ ...filter, [field]: event.target.value })\n                }\n              />\n            )\n          })}\n        </>\n      ) : null}\n      <div style={{ height: 600, width: '100%', overflow: 'auto' }}>\n        <DataGrid\n          rows={rows}\n          columns={infoFields}\n          rowHeight={20}\n          headerHeight={25}\n          disableSelectionOnClick\n          disableColumnMenu\n        />\n      </div>\n    </BaseCard>\n  )\n}\n\nfunction BreakendPanel(props: {\n  locStrings: string[]\n  model: any\n  feature: SimpleFeatureSerialized\n}) {\n  const { model, locStrings, feature } = props\n  const session = getSession(model)\n  const { pluginManager } = getEnv(session)\n  const [breakpointDialog, setBreakpointDialog] = useState(false)\n  let viewType: any\n  try {\n    viewType = pluginManager.getViewType('BreakpointSplitView')\n  } catch (e) {\n    // plugin not added\n  }\n\n  const simpleFeature = new SimpleFeature(feature)\n  return (\n    <BaseCard {...props} title=\"Breakends\">\n      <Typography>Link to linear view of breakend endpoints</Typography>\n      <ul>\n        {locStrings.map((locString, index) => {\n          return (\n            <li key={`${JSON.stringify(locString)}-${index}`}>\n              <Link\n                href=\"#\"\n                onClick={() => {\n                  const { view } = model\n                  if (view) {\n                    view.navToLocString?.(locString)\n                  } else {\n                    session.notify(\n                      'No view associated with this feature detail panel anymore',\n                      'warning',\n                    )\n                  }\n                }}\n              >\n                {`LGV - ${locString}`}\n              </Link>\n            </li>\n          )\n        })}\n      </ul>\n      {viewType ? (\n        <>\n          <Typography>\n            Launch split views with breakend source and target\n          </Typography>\n          <ul>\n            {locStrings.map((locString, index) => {\n              return (\n                <li key={`${JSON.stringify(locString)}-${index}`}>\n                  <Link\n                    href=\"#\"\n                    onClick={() => {\n                      setBreakpointDialog(true)\n                    }}\n                  >\n                    {`${feature.refName}:${feature.start} // ${locString} (split view)`}\n                  </Link>\n                </li>\n              )\n            })}\n          </ul>\n          {breakpointDialog ? (\n            <BreakendOptionDialog\n              model={model}\n              feature={simpleFeature}\n              viewType={viewType}\n              handleClose={() => {\n                setBreakpointDialog(false)\n              }}\n            />\n          ) : null}\n        </>\n      ) : null}\n    </BaseCard>\n  )\n}\n\nfunction VariantFeatureDetails(props: any) {\n  const { model } = props\n  const { featureData, descriptions } = model\n  const feat = JSON.parse(JSON.stringify(featureData))\n  const { samples, ...rest } = feat\n  const basicDescriptions = {\n    CHROM: 'chromosome: An identifier from the reference genome',\n    POS:\n      'position: The reference position, with the 1st base having position 1',\n    ID:\n      'identifier: Semi-colon separated list of unique identifiers where available',\n    REF:\n      'reference base(s): Each base must be one of A,C,G,T,N (case insensitive).',\n    ALT:\n      ' alternate base(s): Comma-separated list of alternate non-reference alleles',\n    QUAL: 'quality: Phred-scaled quality score for the assertion made in ALT',\n    FILTER:\n      'filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail',\n  }\n\n  return (\n    <Paper data-testid=\"variant-side-drawer\">\n      <FeatureDetails\n        feature={{\n          ...rest,\n          ALT: rest.ALT?.map((alt: string | Breakend) => toString(alt)),\n        }}\n        descriptions={{ ...basicDescriptions, ...descriptions }}\n        {...props}\n      />\n      <Divider />\n      {feat.type === 'breakend' ? (\n        <BreakendPanel\n          feature={feat}\n          locStrings={feat.ALT.map((alt: any) => alt.MatePosition)}\n          model={model}\n        />\n      ) : null}\n      {feat.type === 'translocation' ? (\n        <BreakendPanel\n          feature={feat}\n          model={model}\n          locStrings={[`${feat.INFO.CHR2[0]}:${feat.INFO.END}`]}\n        />\n      ) : null}\n      <VariantSamples feature={feat} {...props} />\n    </Paper>\n  )\n}\n\nexport default observer(VariantFeatureDetails)\n"],"names":["ChordVariantDisplayF","pluginManager","jbrequire","types","ConfigurationSchema","ConfigurationReference","getContainingView","getParentRenderProps","configSchema","renderer","optional","pluggableConfigSchemaType","type","baseConfiguration","baseChordDisplayConfig","explicitlyTyped","stateModel","compose","BaseChordDisplayModel","model","literal","configuration","views","self","view","rpcDriverName","displayModel","bezierRadius","radiusPx","bezierRadiusRatio","radius","blockDefinitions","this","config","onChordClick","DisplayType","lib","load","ChordVariantDisplay","name","trackType","viewType","ReactComponent","BaseChordDisplayComponentFactory","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","generator","create","Generator","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","linearBasicDisplayModelFactory","actions","selectFeature","feature","session","getSession","isSessionModelWithWidgets","rpcManager","sessionId","getRpcSessionId","track","getContainingTrack","adapterConfig","getConf","header","featureWidget","addWidget","featureData","toJSON","descriptions","showWidget","setSelection","ChordRendererF","React","useMemo","observer","MobxPropTypes","PropTypes","polarToCartesian","readConfObject","CommonPropTypes","bpToRadians","block","pos","flipped","region","elided","end","start","bpPerRadian","startRadians","Chord","svType","endPosition","endBlock","blocksForRefs","selected","onClick","startBlock","get","SVTYPE","matePosition","MatePosition","split","parseInt","chr2","CHR2","END","mate","refName","strokeColor","startPos","endRadians","startXY","endXY","controlXY","hoverStrokeColor","id","d","join","style","stroke","evt","onMouseOver","target","onMouseOut","StructuralVariantChords","props","features","selectedFeatureId","blocksForRefsMemo","regions","chords","String","trackStyleId","dangerouslySetInnerHTML","__html","propTypes","instanceOf","Map","isRequired","ConfigSchema","objectOrObservableObject","arrayOf","number","string","oneOfType","func","defaultProps","ChordRendererConfigF","ChordRendererType","ReactComponentFactory","description","defaultValue","contextVariable","strokeColorSelected","strokeColorHover","stateModelFactory","ElementId","safeReference","pluggableMstType","frozen","setFeatureData","data","clearFeatureData","vcfGzLocation","uri","index","indexType","enumeration","location","vcfLocation","VCFFeature","args","variant","parser","dataFromVariant","_id","field","SAMPLES","REF","ALT","CHROM","INFO","ID","POS","_getSOTermAndDescription","SO_term","isTRA","some","f","indexOf","aliases","ref","alt","soTerms","Set","a","_this","_getSOAndDescFromAltDefs","soTerm","_getSOAndDescByExamination","add","size","prefixes","_toConsumableArray","map","desc","prefix","new_descs","suffixes","pref","filter","_typeof","startsWith","_altTypeToSO","getMetadata","modAlt","_makeDescriptionString","includes","uniqueId","samples","DEL","INS","DUP","INV","INVDUP","CNV","TRA","NON_REF","VariantsPlugin","Plugin","addAdapterType","AdapterType","vcfTabixAdapterConfigSchema","getAdapterClass","r","vcfAdapterConfigSchema","addRendererType","StructuralVariantChordRendererFactory","addTrackType","createBaseTrackConfig","TrackType","createBaseTrackModel","addDisplayType","linearBasicDisplayConfigSchemaFactory","linearVariantDisplayConfigSchemaFactory","linearVariantDisplayModelFactory","BaseLinearDisplayComponent","addWidgetType","WidgetType","heading","variantFeatureWidgetConfigSchema","variantFeatureWidgetStateModelFactory","lazy","BaseFeatureDataAdapter","configured","filehandle","openLocation","vcf","TabixIndexedFile","csiFilehandle","isCSI","tbiFilehandle","chunkCacheSize","chunkSizeLimit","getHeader","VcfParser","e","opts","configure","getReferenceSequenceNames","query","ObservableCreate","_this2","getLines","lineCallback","line","fileOffset","VcfFeature","parseLine","signal","superGetFeaturesInMultipleRegions","_this3","bytesForRegions","bytes","stat","pct","Math","round","console","warn","subscribe","all","blocksForRange","byteRanges","blocks","minv","blockPosition","maxv","find","range","min","max","reduce","b","readVcf","lines","refNames","rest","VcfAdapter","readFile","fileContents","TextDecoder","unzip","decode","decodeFileContents","VCF","setupP","setup","useStyles","makeStyles","theme","closeButton","position","right","spacing","top","color","palette","grey","display","BreakendOptionDialog","handleClose","classes","useState","copyTracks","setCopyTracks","mirrorTracks","setMirrorTracks","Dialog","open","onClose","DialogTitle","IconButton","className","CloseIcon","Divider","DialogContent","FormControlLabel","control","Checkbox","checked","onChange","val","label","DialogActions","Button","viewSnapshot","snapshotFromBreakendFeature","offsetPx","width","viewTracks","getSnapshot","tracks","addView","autoFocus","VariantSamples","setFilter","showFilters","setShowFilters","preFilteredRows","entries","infoFields","rows","filters","row","fromEntries","sample","every","currFilter","match","RegExp","BaseCard","title","Typography","TextField","placeholder","event","height","overflow","DataGrid","columns","rowHeight","headerHeight","disableSelectionOnClick","disableColumnMenu","BreakendPanel","locStrings","getEnv","breakpointDialog","setBreakpointDialog","getViewType","simpleFeature","SimpleFeature","locString","JSON","stringify","Link","href","navToLocString","notify","VariantFeatureDetails","feat","parse","Paper","FeatureDetails","_rest$ALT","char","MateDirection","Join","Replacement","QUAL","FILTER"],"mappings":"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"}
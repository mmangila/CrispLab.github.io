{"version":3,"file":"plugin-variants.cjs.development.js","sources":["../src/ChordVariantDisplay/models/ChordVariantDisplay.js","../src/ChordVariantDisplay/index.ts","../src/LinearVariantDisplay/configSchema.ts","../../../node_modules/regenerator-runtime/runtime.js","../src/LinearVariantDisplay/model.ts","../src/StructuralVariantChordRenderer/ReactComponent.js","../src/StructuralVariantChordRenderer/index.js","../src/VariantFeatureWidget/index.js","../src/VcfTabixAdapter/configSchema.ts","../src/VcfAdapter/configSchema.ts","../src/VcfTabixAdapter/VcfFeature.ts","../src/index.ts","../src/VcfTabixAdapter/VcfTabixAdapter.ts","../src/VcfAdapter/VcfAdapter.ts","../src/VariantFeatureWidget/BreakendOptionDialog.tsx","../src/VariantFeatureWidget/VariantFeatureWidget.tsx"],"sourcesContent":["import {\n  baseChordDisplayConfig,\n  BaseChordDisplayModel,\n} from '@jbrowse/plugin-circular-view'\n\nconst ChordVariantDisplayF = pluginManager => {\n  const { jbrequire } = pluginManager\n\n  const { types } = jbrequire('mobx-state-tree')\n  const { ConfigurationSchema, ConfigurationReference } = jbrequire(\n    '@jbrowse/core/configuration',\n  )\n  const { getContainingView } = jbrequire('@jbrowse/core/util')\n  const { getParentRenderProps } = jbrequire('@jbrowse/core/util/tracks')\n  const configSchema = ConfigurationSchema(\n    'ChordVariantDisplay',\n    {\n      renderer: types.optional(\n        pluginManager.pluggableConfigSchemaType('renderer'),\n        { type: 'StructuralVariantChordRenderer' },\n      ),\n    },\n    { baseConfiguration: baseChordDisplayConfig, explicitlyTyped: true },\n  )\n\n  const stateModel = types\n    .compose(\n      'ChordVariantDisplay',\n      BaseChordDisplayModel,\n      types.model({\n        type: types.literal('ChordVariantDisplay'),\n        configuration: ConfigurationReference(configSchema),\n      }),\n    )\n    .views(self => ({\n      get rendererTypeName() {\n        return self.configuration.renderer.type\n      },\n      get renderProps() {\n        const view = getContainingView(self)\n        return {\n          ...getParentRenderProps(self),\n          rpcDriverName: self.rpcDriverName,\n          displayModel: self,\n          bezierRadius: view.radiusPx * self.bezierRadiusRatio,\n          radius: view.radiusPx,\n          blockDefinitions: this.blockDefinitions,\n          config: self.configuration.renderer,\n          onChordClick: self.onChordClick,\n        }\n      },\n    }))\n\n  return { stateModel, configSchema }\n}\n\n// http://localhost:3000/test_data/hs37d5.HG002-SequelII-CCS.sv.vcf.gz.tbi\n\n// render request is for 1.5x the current viewing window\n\n// tracks all have a height\n//\nexport default ChordVariantDisplayF\n","import PluginManager from '@jbrowse/core/PluginManager'\nimport { BaseChordDisplayComponentFactory } from '@jbrowse/plugin-circular-view'\nimport ChordVariantDisplay from './models/ChordVariantDisplay'\n\nexport default (pluginManager: PluginManager) => {\n  const { lib, load } = pluginManager\n  const DisplayType = lib['@jbrowse/core/pluggableElementTypes/DisplayType']\n\n  const { stateModel, configSchema } = load(ChordVariantDisplay)\n\n  return new DisplayType({\n    name: 'ChordVariantDisplay',\n    configSchema,\n    stateModel,\n    trackType: 'VariantTrack',\n    viewType: 'CircularView',\n    ReactComponent: BaseChordDisplayComponentFactory(pluginManager),\n  })\n}\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport { Instance } from 'mobx-state-tree'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { linearBasicDisplayConfigSchemaFactory } from '@jbrowse/plugin-linear-genome-view'\n\nexport function LinearVariantDisplayConfigFactory(\n  pluginManager: PluginManager,\n) {\n  const configSchema = linearBasicDisplayConfigSchemaFactory(pluginManager)\n\n  return ConfigurationSchema(\n    'LinearVariantDisplay',\n    {},\n    { baseConfiguration: configSchema, explicitlyTyped: true },\n  )\n}\n\nexport type LinearVariantDisplayConfigModel = ReturnType<\n  typeof LinearVariantDisplayConfigFactory\n>\nexport type LinearVariantDisplayConfig = Instance<\n  LinearVariantDisplayConfigModel\n>\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { getConf, ConfigurationReference } from '@jbrowse/core/configuration'\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks'\nimport {\n  getContainingTrack,\n  getSession,\n  getContainingView,\n  isSessionModelWithWidgets,\n} from '@jbrowse/core/util'\n\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { linearBasicDisplayModelFactory } from '@jbrowse/plugin-linear-genome-view'\nimport { types } from 'mobx-state-tree'\nimport { LinearVariantDisplayConfigModel } from './configSchema'\n\nexport default function (configSchema: LinearVariantDisplayConfigModel) {\n  return types\n    .compose(\n      'LinearVariantDisplay',\n      linearBasicDisplayModelFactory(configSchema),\n      types.model({\n        type: types.literal('LinearVariantDisplay'),\n        configuration: ConfigurationReference(configSchema),\n      }),\n    )\n    .actions(self => ({\n      async selectFeature(feature: Feature) {\n        const session = getSession(self)\n        if (isSessionModelWithWidgets(session)) {\n          const { rpcManager } = session\n          const sessionId = getRpcSessionId(self)\n          const track = getContainingTrack(self)\n          const adapterConfig = getConf(track, 'adapter')\n          const header = await rpcManager.call(sessionId, 'CoreGetMetadata', {\n            adapterConfig,\n          })\n          const featureWidget = session.addWidget(\n            'VariantFeatureWidget',\n            'variantFeature',\n            {\n              featureData: feature.toJSON(),\n              view: getContainingView(self),\n              descriptions: header,\n            },\n          )\n          session.showWidget(featureWidget)\n        }\n\n        session.setSelection(feature)\n      },\n    }))\n}\n","const ChordRendererF = ({ jbrequire }) => {\n  const React = jbrequire('react')\n  const { useMemo } = jbrequire('react')\n  const { observer, PropTypes: MobxPropTypes } = jbrequire('mobx-react')\n  const { polarToCartesian } = jbrequire('@jbrowse/core/util')\n  const { readConfObject } = jbrequire('@jbrowse/core/configuration')\n\n  const { PropTypes: CommonPropTypes } = jbrequire(\n    '@jbrowse/core/util/types/mst',\n  )\n  const PropTypes = jbrequire('prop-types')\n\n  function bpToRadians(block, pos) {\n    const blockStart = block.region.elided ? 0 : block.region.start\n    const blockEnd = block.region.elided ? 0 : block.region.end\n    const bpOffset = block.flipped ? blockEnd - pos : pos - blockStart\n    const radians = bpOffset / block.bpPerRadian + block.startRadians\n    return radians\n  }\n\n  const Chord = observer(function Chord({\n    feature,\n    blocksForRefs,\n    radius,\n    config,\n    bezierRadius,\n    selected,\n    onClick,\n  }) {\n    // find the blocks that our start and end points belong to\n    const startBlock = blocksForRefs[feature.get('refName')]\n    if (!startBlock) {\n      return null\n    }\n    let svType\n    if (feature.get('INFO')) {\n      ;[svType] = feature.get('INFO').SVTYPE || []\n    } else if (feature.get('mate')) {\n      svType = 'mate'\n    }\n    let endPosition\n    let endBlock\n    if (svType === 'BND') {\n      // VCF BND\n      const breakendSpecification = (feature.get('ALT') || [])[0]\n      const matePosition = breakendSpecification.MatePosition.split(':')\n      endPosition = parseInt(matePosition[1], 10)\n      endBlock = blocksForRefs[matePosition[0]]\n    } else if (svType === 'TRA') {\n      // VCF TRA\n      const chr2 = ((feature.get('INFO') || {}).CHR2 || [])[0]\n      const end = ((feature.get('INFO') || {}).END || [])[0]\n      endPosition = parseInt(end, 10)\n      endBlock = blocksForRefs[chr2]\n    } else if (svType === 'mate') {\n      // generic simplefeatures arcs\n      const mate = feature.get('mate')\n      const chr2 = mate.refName\n      endPosition = mate.start\n      endBlock = blocksForRefs[chr2]\n    }\n    if (endBlock) {\n      const startPos = feature.get('start')\n      const startRadians = bpToRadians(startBlock, startPos)\n      const endRadians = bpToRadians(endBlock, endPosition)\n      const startXY = polarToCartesian(radius, startRadians)\n      const endXY = polarToCartesian(radius, endRadians)\n      const controlXY = polarToCartesian(\n        bezierRadius,\n        (endRadians + startRadians) / 2,\n      )\n\n      let strokeColor\n      if (selected) {\n        strokeColor = readConfObject(config, 'strokeColorSelected', { feature })\n      } else {\n        strokeColor = readConfObject(config, 'strokeColor', { feature })\n      }\n      const hoverStrokeColor = readConfObject(config, 'strokeColorHover', {\n        feature,\n      })\n      return (\n        <path\n          data-testid={`chord-${feature.id()}`}\n          d={['M', ...startXY, 'Q', ...controlXY, ...endXY].join(' ')}\n          style={{ stroke: strokeColor }}\n          onClick={evt =>\n            onClick(feature, startBlock.region, endBlock.region, evt)\n          }\n          onMouseOver={evt => {\n            if (!selected) {\n              evt.target.style.stroke = hoverStrokeColor\n            }\n          }}\n          onMouseOut={evt => {\n            if (!selected) {\n              evt.target.style.stroke = strokeColor\n            }\n          }}\n        />\n      )\n    }\n\n    return null\n  })\n\n  function StructuralVariantChords(props) {\n    const {\n      features,\n      config,\n      displayModel,\n      blockDefinitions,\n      radius,\n      bezierRadius,\n      displayModel: { selectedFeatureId },\n\n      onChordClick,\n    } = props\n    // make a map of refName -> blockDefinition\n    const blocksForRefsMemo = useMemo(() => {\n      const blocksForRefs = {}\n      blockDefinitions.forEach(block => {\n        const regions = block.region.elided\n          ? block.region.regions\n          : [block.region]\n        regions.forEach(region => {\n          blocksForRefs[region.refName] = block\n        })\n      })\n      return blocksForRefs\n    }, [blockDefinitions])\n    // console.log(blocksForRefs)\n    const chords = []\n    for (const [id, feature] of features) {\n      const selected = String(selectedFeatureId) === String(feature.id())\n      chords.push(\n        <Chord\n          key={id}\n          feature={feature}\n          config={config}\n          displayModel={displayModel}\n          radius={radius}\n          bezierRadius={bezierRadius}\n          blocksForRefs={blocksForRefsMemo}\n          selected={selected}\n          onClick={onChordClick}\n        />,\n      )\n    }\n    const trackStyleId = `chords-${displayModel.id}`\n    return (\n      <g id={trackStyleId} data-testid=\"structuralVariantChordRenderer\">\n        <style\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{\n            __html: `\n          #${trackStyleId} > path {\n            cursor: crosshair;\n            fill: none;\n          }\n`,\n          }}\n        />\n        {chords}\n      </g>\n    )\n  }\n\n  StructuralVariantChords.propTypes = {\n    features: PropTypes.instanceOf(Map).isRequired,\n    config: CommonPropTypes.ConfigSchema.isRequired,\n    displayModel: MobxPropTypes.objectOrObservableObject,\n    blockDefinitions: PropTypes.arrayOf(MobxPropTypes.objectOrObservableObject)\n      .isRequired,\n    radius: PropTypes.number.isRequired,\n    bezierRadius: PropTypes.number.isRequired,\n    selectedFeatureId: PropTypes.string,\n    onChordClick: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  }\n\n  StructuralVariantChords.defaultProps = {\n    displayModel: undefined,\n    selectedFeatureId: '',\n    onChordClick: undefined,\n  }\n\n  return observer(StructuralVariantChords)\n}\n\nexport default ChordRendererF\n","import ReactComponentFactory from './ReactComponent'\n\nconst ChordRendererConfigF = pluginManager => {\n  const { jbrequire } = pluginManager\n  const ChordRendererType = jbrequire(\n    '@jbrowse/core/pluggableElementTypes/renderers/CircularChordRendererType',\n  )\n  const { ConfigurationSchema } = jbrequire('@jbrowse/core/configuration')\n\n  const ReactComponent = jbrequire(ReactComponentFactory)\n  const configSchema = ConfigurationSchema(\n    'StructuralVariantChordRenderer',\n    {\n      strokeColor: {\n        type: 'color',\n        description: 'the line color of each arc',\n        defaultValue: 'rgba(255,133,0,0.32)',\n        contextVariable: ['feature'],\n      },\n      strokeColorSelected: {\n        type: 'color',\n        description: 'the line color of an arc that has been selected',\n        defaultValue: 'black',\n        contextVariable: ['feature'],\n      },\n      strokeColorHover: {\n        type: 'color',\n        description:\n          'the line color of an arc that is being hovered over with the mouse',\n        defaultValue: '#555',\n        contextVariable: ['feature'],\n      },\n    },\n    { explicitlyTyped: true },\n  )\n  return new ChordRendererType({\n    name: 'StructuralVariantChordRenderer',\n    ReactComponent,\n    configSchema,\n    pluginManager,\n  })\n}\n\nexport default ChordRendererConfigF\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport { ElementId } from '@jbrowse/core/util/types/mst'\nimport { types } from 'mobx-state-tree'\n\nexport const configSchema = ConfigurationSchema('VariantFeatureWidget', {})\n\nexport function stateModelFactory(pluginManager) {\n  return types\n    .model('VariantFeatureWidget', {\n      id: ElementId,\n      type: types.literal('VariantFeatureWidget'),\n      view: types.safeReference(\n        pluginManager.pluggableMstType('view', 'stateModel'),\n      ),\n      featureData: types.frozen(),\n      descriptions: types.frozen(),\n    })\n    .actions(self => ({\n      setFeatureData(data) {\n        self.featureData = data\n      },\n      clearFeatureData() {\n        self.featureData = undefined\n      },\n    }))\n}\n","import { types } from 'mobx-state-tree'\nimport { ConfigurationSchema } from '@jbrowse/core/configuration'\n\nexport default ConfigurationSchema(\n  'VcfTabixAdapter',\n  {\n    vcfGzLocation: {\n      type: 'fileLocation',\n      defaultValue: { uri: '/path/to/my.vcf.gz' },\n    },\n    index: ConfigurationSchema('VcfIndex', {\n      indexType: {\n        model: types.enumeration('IndexType', ['TBI', 'CSI']),\n        type: 'stringEnum',\n        defaultValue: 'TBI',\n      },\n      location: {\n        type: 'fileLocation',\n        defaultValue: { uri: '/path/to/my.vcf.gz.tbi' },\n      },\n    }),\n  },\n  { explicitlyTyped: true },\n)\n","import { ConfigurationSchema } from '@jbrowse/core/configuration'\n\nexport default ConfigurationSchema(\n  'VcfAdapter',\n  {\n    vcfLocation: {\n      type: 'fileLocation',\n      defaultValue: { uri: '/path/to/my.vcf' },\n    },\n  },\n  { explicitlyTyped: true },\n)\n","import { Feature } from '@jbrowse/core/util/simpleFeature'\n\n/* eslint-disable no-underscore-dangle */\n\n/**\n * VCF Feature creation with lazy genotype evaluation.\n */\ninterface Samples {\n  [key: string]: {\n    [key: string]: { values: string[] | number[] | null }\n  }\n}\nexport interface Breakend {\n  MateDirection: string\n  Replacement: string\n  MatePosition: string\n  Join: string\n}\ninterface FeatureData {\n  [key: string]: unknown\n  refName: string\n  start: number\n  end: number\n  description?: string\n  type?: string\n  name?: string\n  aliases?: string[]\n  samples?: Samples\n}\n\nexport default class VCFFeature implements Feature {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private variant: any\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private parser: any\n\n  private data: FeatureData\n\n  private _id: string\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(args: { variant: any; parser: any; id: string }) {\n    this.variant = args.variant\n    this.parser = args.parser\n    this.data = this.dataFromVariant(this.variant)\n    this._id = args.id\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  get(field: string): any {\n    if (field === 'samples') {\n      return this.variant.SAMPLES\n    }\n    return this.data[field] || this.variant[field]\n  }\n\n  set(): void {}\n\n  parent(): undefined {\n    return undefined\n  }\n\n  children(): undefined {\n    return undefined\n  }\n\n  tags(): string[] {\n    const t = [\n      ...Object.keys(this.data),\n      ...Object.keys(this.variant),\n      'samples',\n    ]\n    return t\n  }\n\n  id(): string {\n    return this._id\n  }\n\n  dataFromVariant(variant: {\n    REF: string\n    POS: number\n    ALT: (string | Breakend)[]\n    CHROM: string\n    INFO: any // eslint-disable-line @typescript-eslint/no-explicit-any\n    ID: string[]\n  }): FeatureData {\n    const { REF, ALT, POS, CHROM, INFO, ID } = variant\n    const start = POS - 1\n    const [SO_term, description] = this._getSOTermAndDescription(REF, ALT)\n    const isTRA = ALT?.some(f => f === '<TRA>')\n    const isSymbolic = ALT?.some(\n      f => typeof f === 'string' && f.indexOf('<') !== -1,\n    )\n    return {\n      refName: CHROM,\n      start,\n      end: isSymbolic && INFO.END && !isTRA ? +INFO.END[0] : start + REF.length,\n      description,\n      type: SO_term,\n      name: ID ? ID[0] : undefined,\n      aliases: ID && ID.length > 1 ? variant.ID.slice(1) : undefined,\n    }\n  }\n\n  /**\n   * Get a sequence ontology (SO) term that describes the variant type\n   */\n  _getSOTermAndDescription(\n    ref: string,\n    alt: (string | Breakend)[],\n  ): [string, string] | [undefined, undefined] {\n    // it's just a remark if there are no alternate alleles\n    if (!alt || alt === []) {\n      return ['remark', 'no alternative alleles']\n    }\n\n    const soTerms: Set<string> = new Set()\n    let descriptions: Set<string> = new Set()\n    alt.forEach(a => {\n      let [soTerm, description] = this._getSOAndDescFromAltDefs(ref, a)\n\n      if (!soTerm) {\n        ;[soTerm, description] = this._getSOAndDescByExamination(ref, a)\n      }\n      if (soTerm && description) {\n        soTerms.add(soTerm)\n        descriptions.add(description)\n      }\n    })\n\n    // Combine descriptions like [\"SNV G -> A\", \"SNV G -> T\"] to [\"SNV G -> A,T\"]\n    if (descriptions.size > 1) {\n      const prefixes = new Set(\n        [...descriptions].map(desc => {\n          const prefix = desc.split('->')\n          return prefix[1] ? prefix[0] : desc\n        }),\n      )\n\n      const new_descs = [...prefixes].map(prefix => {\n        const suffixes = [...descriptions]\n          .map(desc => {\n            const pref = desc.split('-> ')\n            return pref[1] && pref[0] === prefix ? pref[1] : ''\n          })\n          .filter(f => !!f)\n\n        return suffixes.length\n          ? prefix + '-> ' + suffixes.join(',')\n          : [...descriptions].join(',')\n      })\n\n      descriptions = new Set(new_descs)\n    }\n    if (soTerms.size) {\n      return [[...soTerms].join(','), [...descriptions].join(',')]\n    }\n    return [undefined, undefined]\n  }\n\n  static _altTypeToSO: { [key: string]: string | undefined } = {\n    DEL: 'deletion',\n    INS: 'insertion',\n    DUP: 'duplication',\n    INV: 'inversion',\n    INVDUP: 'inverted duplication',\n    CNV: 'copy_number_variation',\n    TRA: 'translocation',\n    'DUP:TANDEM': 'tandem_duplication',\n    NON_REF: 'sequence_variant',\n    '*': 'sequence_variant',\n  }\n\n  _getSOAndDescFromAltDefs(\n    ref: string,\n    alt: string | Breakend,\n  ): [string, string] | [undefined, undefined] {\n    // not a symbolic ALT if doesn't begin with '<', so we'll have no definition\n    if (typeof alt === 'object') {\n      return ['breakend', alt.toString()]\n    }\n\n    if (typeof alt === 'string' && !alt.startsWith('<')) {\n      return [undefined, undefined]\n    }\n\n    // look for a definition with an SO type for this\n    let soTerm = VCFFeature._altTypeToSO[alt]\n    // if no SO term but ALT is in metadata, assume sequence_variant\n    if (!soTerm && this.parser.getMetadata('ALT', alt)) {\n      soTerm = 'sequence_variant'\n    }\n    if (soTerm) {\n      // const metaDescription = this.parser.getMetadata('ALT', alt, 'Description')\n      // const description = metaDescription\n      //   ? `${alt} - ${metaDescription}`\n      //   : this._makeDescriptionString(soTerm, ref, alt)\n      return [soTerm, alt]\n    }\n\n    // try to look for a definition for a parent term if we can\n    const modAlt = alt.split(':')\n    if (modAlt.length > 1) {\n      return this._getSOAndDescFromAltDefs(\n        ref,\n        `<${modAlt.slice(0, modAlt.length - 1).join(':')}>`,\n      )\n    }\n\n    // no parent\n    return [undefined, undefined]\n  }\n\n  _getSOAndDescByExamination(\n    ref: string,\n    alt: string | Breakend,\n  ): [string, string] {\n    if (typeof alt === 'object') {\n      return ['breakend', this._makeDescriptionString('breakend', ref, alt)]\n    }\n\n    if (ref.length === 1 && alt.length === 1) {\n      // use SNV because SO definition of SNP says abundance must be at\n      // least 1% in population, and can't be sure we meet that\n      return ['SNV', this._makeDescriptionString('SNV', ref, alt)]\n    }\n\n    if (alt.includes('<')) {\n      return ['sv', alt]\n    }\n\n    if (ref.length === alt.length) {\n      if (ref.split('').reverse().join('') === alt) {\n        return ['inversion', this._makeDescriptionString('inversion', ref, alt)]\n      }\n      return [\n        'substitution',\n        this._makeDescriptionString('substitution', ref, alt),\n      ]\n    }\n\n    if (ref.length <= alt.length) {\n      return ['insertion', this._makeDescriptionString('insertion', ref, alt)]\n    }\n\n    if (ref.length > alt.length) {\n      return ['deletion', this._makeDescriptionString('deletion', ref, alt)]\n    }\n\n    return ['indel', this._makeDescriptionString('indel', ref, alt)]\n  }\n\n  _makeDescriptionString(\n    soTerm: string,\n    ref: string,\n    alt: string | Breakend,\n  ): string {\n    return `${soTerm} ${ref} -> ${alt}`\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  toJSON(): any {\n    return {\n      uniqueId: this._id,\n      ...this.variant,\n      ...this.data,\n      samples: this.variant.SAMPLES,\n    }\n  }\n}\n","import { lazy } from 'react'\nimport { ConfigurationSchema } from '@jbrowse/core/configuration'\nimport AdapterType from '@jbrowse/core/pluggableElementTypes/AdapterType'\nimport DisplayType from '@jbrowse/core/pluggableElementTypes/DisplayType'\nimport {\n  createBaseTrackConfig,\n  createBaseTrackModel,\n} from '@jbrowse/core/pluggableElementTypes/models'\nimport TrackType from '@jbrowse/core/pluggableElementTypes/TrackType'\nimport WidgetType from '@jbrowse/core/pluggableElementTypes/WidgetType'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { BaseLinearDisplayComponent } from '@jbrowse/plugin-linear-genome-view'\nimport ChordVariantDisplay from './ChordVariantDisplay'\nimport {\n  configSchemaFactory as linearVariantDisplayConfigSchemaFactory,\n  modelFactory as linearVariantDisplayModelFactory,\n} from './LinearVariantDisplay'\nimport StructuralVariantChordRendererFactory from './StructuralVariantChordRenderer'\nimport {\n  configSchema as variantFeatureWidgetConfigSchema,\n  stateModelFactory as variantFeatureWidgetStateModelFactory,\n} from './VariantFeatureWidget'\nimport { configSchema as vcfTabixAdapterConfigSchema } from './VcfTabixAdapter'\nimport { configSchema as vcfAdapterConfigSchema } from './VcfAdapter'\n\nexport default class VariantsPlugin extends Plugin {\n  name = 'VariantsPlugin'\n\n  install(pluginManager: PluginManager) {\n    pluginManager.addAdapterType(\n      () =>\n        new AdapterType({\n          name: 'VcfTabixAdapter',\n          configSchema: vcfTabixAdapterConfigSchema,\n          getAdapterClass: () =>\n            import('./VcfTabixAdapter/VcfTabixAdapter').then(r => r.default),\n        }),\n    )\n\n    pluginManager.addAdapterType(\n      () =>\n        new AdapterType({\n          name: 'VcfAdapter',\n          configSchema: vcfAdapterConfigSchema,\n          getAdapterClass: () =>\n            import('./VcfAdapter/VcfAdapter').then(r => r.default),\n        }),\n    )\n\n    pluginManager.addRendererType(() =>\n      pluginManager.jbrequire(StructuralVariantChordRendererFactory),\n    )\n    pluginManager.addTrackType(() => {\n      const configSchema = ConfigurationSchema(\n        'VariantTrack',\n        {},\n        { baseConfiguration: createBaseTrackConfig(pluginManager) },\n      )\n      return new TrackType({\n        name: 'VariantTrack',\n        configSchema,\n        stateModel: createBaseTrackModel(\n          pluginManager,\n          'VariantTrack',\n          configSchema,\n        ),\n      })\n    })\n\n    pluginManager.addDisplayType(() =>\n      pluginManager.jbrequire(ChordVariantDisplay),\n    )\n\n    pluginManager.addDisplayType(() => {\n      const configSchema = linearVariantDisplayConfigSchemaFactory(\n        pluginManager,\n      )\n      return new DisplayType({\n        name: 'LinearVariantDisplay',\n        configSchema,\n        stateModel: linearVariantDisplayModelFactory(configSchema),\n        trackType: 'VariantTrack',\n        viewType: 'LinearGenomeView',\n        ReactComponent: BaseLinearDisplayComponent,\n      })\n    })\n\n    pluginManager.addWidgetType(\n      () =>\n        new WidgetType({\n          name: 'VariantFeatureWidget',\n          heading: 'Feature details',\n          configSchema: variantFeatureWidgetConfigSchema,\n          stateModel: variantFeatureWidgetStateModelFactory(pluginManager),\n          ReactComponent: lazy(\n            () => import('./VariantFeatureWidget/VariantFeatureWidget'),\n          ),\n        }),\n    )\n  }\n}\n\nexport { default as VcfFeature } from './VcfTabixAdapter/VcfFeature'\n","import {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport {\n  FileLocation,\n  NoAssemblyRegion,\n  Region,\n} from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { TabixIndexedFile } from '@gmod/tabix'\nimport { GenericFilehandle } from 'generic-filehandle'\nimport VcfParser from '@gmod/vcf'\nimport { Observer } from 'rxjs'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport VcfFeature from './VcfFeature'\n\nexport default class extends BaseFeatureDataAdapter {\n  protected configured?: Promise<{\n    vcf: TabixIndexedFile\n    parser: typeof VcfParser\n    filehandle: GenericFilehandle\n  }>\n\n  protected async configure() {\n    if (!this.configured) {\n      const vcfGzLocation = readConfObject(this.config, 'vcfGzLocation')\n      const location = readConfObject(this.config, ['index', 'location'])\n      const indexType = readConfObject(this.config, ['index', 'indexType'])\n\n      const filehandle = openLocation(vcfGzLocation as FileLocation)\n      const isCSI = indexType === 'CSI'\n      const vcf = new TabixIndexedFile({\n        filehandle,\n        csiFilehandle: isCSI ? openLocation(location) : undefined,\n        tbiFilehandle: !isCSI ? openLocation(location) : undefined,\n        chunkCacheSize: 50 * 2 ** 20,\n        chunkSizeLimit: 1000000000,\n      })\n\n      this.configured = vcf\n        .getHeader()\n        .then(header => ({\n          filehandle,\n          vcf,\n          parser: new VcfParser({ header }),\n        }))\n        .catch(e => {\n          this.configured = undefined\n          throw e\n        })\n    }\n    return this.configured\n  }\n\n  public async getRefNames(opts: BaseOptions = {}) {\n    const { vcf } = await this.configure()\n    return vcf.getReferenceSequenceNames(opts)\n  }\n\n  async getHeader() {\n    const { vcf } = await this.configure()\n    return vcf.getHeader()\n  }\n\n  async getMetadata() {\n    const { parser } = await this.configure()\n    return parser.getMetadata()\n  }\n\n  public getFeatures(query: NoAssemblyRegion, opts: BaseOptions = {}) {\n    return ObservableCreate<Feature>(async observer => {\n      const { refName, start, end } = query\n      const { vcf, parser } = await this.configure()\n      await vcf.getLines(refName, start, end, {\n        lineCallback: (line: string, fileOffset: number) => {\n          observer.next(\n            new VcfFeature({\n              variant: parser.parseLine(line),\n              parser,\n              id: `${this.id}-vcf-${fileOffset}`,\n            }),\n          )\n        },\n        ...opts,\n      })\n      observer.complete()\n    }, opts.signal)\n  }\n\n  /**\n   * Checks if the data source has data for the given reference sequence,\n   * and then gets the features in the region if it does\n   *\n   * Currently this just calls getFeatureInRegion for each region. Adapters that\n   * are frequently called on multiple regions simultaneously may want to\n   * implement a more efficient custom version of this method.\n   *\n   * Also includes a bit of extra logging to warn when fetching a large portion\n   * of a VCF\n   * @param regions - Regions\n   * @param opts - Feature adapter options\n   * @returns Observable of Feature objects in the regions\n   */\n  public getFeaturesInMultipleRegions(\n    regions: Region[],\n    opts: BaseOptions = {},\n  ) {\n    // TODO: restore commented version below once TSDX supports Rollup v2\n    // xref: https://github.com/rollup/rollup/blob/master/CHANGELOG.md#bug-fixes-45\n    const superGetFeaturesInMultipleRegions = super.getFeaturesInMultipleRegions\n    return ObservableCreate<Feature>(async (observer: Observer<Feature>) => {\n      const bytes = await this.bytesForRegions(regions)\n      const { filehandle } = await this.configure()\n      const stat = await filehandle.stat()\n      let pct = Math.round((bytes / stat.size) * 100)\n      if (pct > 100) {\n        // this is just a bad estimate, make 100% if it goes over\n        pct = 100\n      }\n      if (pct > 60) {\n        console.warn(\n          `getFeaturesInMultipleRegions fetching ${pct}% of VCF file, but whole-file streaming not yet implemented`,\n        )\n      }\n      superGetFeaturesInMultipleRegions\n        .call(this, regions, opts)\n        .subscribe(observer)\n      // super.getFeaturesInMultipleRegions(regions, opts).subscribe(observer)\n    })\n  }\n\n  /**\n   * get the approximate number of bytes queried from the file for the given\n   * query regions\n   * @param regions - list of query regions\n   */\n  private async bytesForRegions(regions: Region[]) {\n    const { vcf } = await this.configure()\n    const blockResults = await Promise.all(\n      regions.map(region =>\n        // @ts-ignore\n        vcf.index.blocksForRange(region.refName, region.start, region.end),\n      ),\n    )\n    interface ByteRange {\n      start: number\n      end: number\n    }\n    interface VirtualOffset {\n      blockPosition: number\n    }\n    interface Block {\n      minv: VirtualOffset\n      maxv: VirtualOffset\n    }\n    const byteRanges: ByteRange[] = []\n    blockResults.forEach((blocks: Block[]) => {\n      blocks.forEach(block => {\n        const start = block.minv.blockPosition\n        const end = block.maxv.blockPosition + 64000\n        if (\n          !byteRanges.find(range => {\n            if (range.start <= end && range.end >= start) {\n              range.start = Math.min(range.start, start)\n              range.end = Math.max(range.end, end)\n              return true\n            }\n            return false\n          })\n        ) {\n          byteRanges.push({ start, end })\n        }\n      })\n    })\n\n    return byteRanges.reduce((a, b) => a + b.end - b.start + 1, 0)\n  }\n\n  public freeResources(/* { region } */): void {}\n}\n","import {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport { FileLocation, Region } from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport { AnyConfigurationModel } from '@jbrowse/core/configuration/configurationSchema'\nimport VcfFeature from '../VcfTabixAdapter/VcfFeature'\nimport VCF from '@gmod/vcf'\nimport { unzip } from '@gmod/bgzf-filehandle'\n\nconst readVcf = (f: string) => {\n  const lines = f.split('\\n')\n  const header: string[] = []\n  const refNames: string[] = []\n  const rest: string[] = []\n  lines.forEach(line => {\n    if (line.startsWith('##contig')) {\n      refNames.push(line.split('##contig=<ID=')[1].split(',')[0])\n    } else if (line.startsWith('#')) {\n      header.push(line)\n    } else if (line) {\n      rest.push(line)\n    }\n  })\n  return { header: header.join('\\n'), lines: rest, refNames }\n}\n\nexport default class VcfAdapter extends BaseFeatureDataAdapter {\n  public static capabilities = ['getFeatures', 'getRefNames']\n\n  private setupP?: Promise<Feature[]>\n\n  public constructor(config: AnyConfigurationModel) {\n    super(config)\n  }\n\n  private async decodeFileContents() {\n    const vcfLocation = readConfObject(\n      this.config,\n      'vcfLocation',\n    ) as FileLocation\n\n    let fileContents = await openLocation(vcfLocation).readFile()\n\n    if (\n      typeof fileContents[0] === 'number' &&\n      fileContents[0] === 31 &&\n      typeof fileContents[1] === 'number' &&\n      fileContents[1] === 139 &&\n      typeof fileContents[2] === 'number' &&\n      fileContents[2] === 8\n    ) {\n      fileContents = new TextDecoder().decode(await unzip(fileContents))\n    } else {\n      fileContents = fileContents.toString()\n    }\n\n    return readVcf(fileContents)\n  }\n\n  public async getLines() {\n    const { header, lines } = await this.decodeFileContents()\n\n    const parser = new VCF({ header: header })\n\n    return lines.map((line, index) => {\n      return new VcfFeature({\n        variant: parser.parseLine(line),\n        parser,\n        id: `${this.id}-vcf-${index}`,\n      })\n    })\n  }\n\n  public async setup() {\n    if (!this.setupP) {\n      this.setupP = this.getLines()\n    }\n    return this.setupP\n  }\n\n  public async getRefNames(_: BaseOptions = {}) {\n    const { refNames } = await this.decodeFileContents()\n    return refNames\n  }\n\n  public getFeatures(region: Region, opts: BaseOptions = {}) {\n    return ObservableCreate<Feature>(async observer => {\n      const feats = await this.setup()\n      feats.forEach(f => {\n        if (\n          f.get('refName') === region.refName &&\n          f.get('end') > region.start &&\n          f.get('start') < region.end\n        ) {\n          observer.next(f)\n        }\n      })\n      observer.complete()\n    }, opts.signal)\n  }\n\n  public freeResources(): void {}\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState } from 'react'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  IconButton,\n  FormControlLabel,\n  Checkbox,\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { getSnapshot } from 'mobx-state-tree'\nimport { getSession } from '@jbrowse/core/util'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\n\nconst useStyles = makeStyles(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n  block: {\n    display: 'block',\n  },\n}))\n\nfunction BreakendOptionDialog({\n  model,\n  handleClose,\n  feature,\n  viewType,\n}: {\n  model: any\n  handleClose: () => void\n  feature: Feature\n  viewType: any\n}) {\n  const classes = useStyles()\n  const [copyTracks, setCopyTracks] = useState(true)\n  const [mirrorTracks, setMirrorTracks] = useState(true)\n\n  return (\n    <Dialog open onClose={handleClose}>\n      <DialogTitle>\n        Breakpoint split view options\n        {handleClose ? (\n          <IconButton\n            className={classes.closeButton}\n            onClick={() => {\n              handleClose()\n            }}\n          >\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </DialogTitle>\n      <Divider />\n\n      <DialogContent>\n        <FormControlLabel\n          className={classes.block}\n          control={\n            <Checkbox\n              checked={copyTracks}\n              onChange={() => setCopyTracks(val => !val)}\n            />\n          }\n          label=\"Copy tracks into the new view\"\n        />\n\n        <FormControlLabel\n          className={classes.block}\n          control={\n            <Checkbox\n              checked={mirrorTracks}\n              onChange={() => setMirrorTracks(val => !val)}\n            />\n          }\n          label=\"Mirror tracks vertically in vertically stacked view\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            const { view } = model\n            const session = getSession(model)\n\n            const viewSnapshot = viewType.snapshotFromBreakendFeature(\n              feature,\n              view,\n            )\n            viewSnapshot.views[0].offsetPx -= view.width / 2 + 100\n            viewSnapshot.views[1].offsetPx -= view.width / 2 + 100\n            viewSnapshot.featureData = feature\n            const viewTracks: any = getSnapshot(view.tracks)\n            viewSnapshot.views[0].tracks = viewTracks\n            viewSnapshot.views[1].tracks = mirrorTracks\n              ? viewTracks.slice().reverse()\n              : viewTracks\n\n            session.addView('BreakpointSplitView', viewSnapshot)\n\n            handleClose()\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n          autoFocus\n        >\n          OK\n        </Button>\n        <Button\n          onClick={() => {\n            handleClose()\n          }}\n          color=\"secondary\"\n          variant=\"contained\"\n          autoFocus\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\nexport default observer(BreakendOptionDialog)\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState } from 'react'\nimport {\n  Divider,\n  Link,\n  Paper,\n  FormControlLabel,\n  Checkbox,\n  TextField,\n  Typography,\n} from '@material-ui/core'\nimport SimpleFeature, {\n  SimpleFeatureSerialized,\n} from '@jbrowse/core/util/simpleFeature'\nimport { DataGrid } from '@material-ui/data-grid'\nimport { observer } from 'mobx-react'\nimport { getSession } from '@jbrowse/core/util'\nimport { getEnv } from 'mobx-state-tree'\nimport {\n  FeatureDetails,\n  BaseCard,\n} from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail'\nimport BreakendOptionDialog from './BreakendOptionDialog'\nimport { Breakend } from '../VcfTabixAdapter/VcfFeature'\n\n// from vcf-js\nfunction toString(feat: string | Breakend) {\n  if (typeof feat === 'string') {\n    return feat\n  }\n  const char = feat.MateDirection === 'left' ? ']' : '['\n  if (feat.Join === 'left') {\n    return `${char}${feat.MatePosition}${char}${feat.Replacement}`\n  }\n  return `${feat.Replacement}${char}${feat.MatePosition}${char}`\n}\n\nfunction VariantSamples(props: any) {\n  const [filter, setFilter] = useState<any>({})\n  const [showFilters, setShowFilters] = useState(false)\n  const { feature } = props\n\n  const { samples = {} } = feature\n  const preFilteredRows: any = Object.entries(samples)\n  if (!preFilteredRows.length) {\n    return null\n  }\n  const infoFields = ['sample', ...Object.keys(preFilteredRows[0][1])].map(\n    field => ({\n      field,\n    }),\n  )\n  let error\n  let rows = []\n  const filters = Object.keys(filter)\n\n  // catch some error thrown from regex\n  // note: maps all values into a string, if this is not done rows are not\n  // sortable by the data-grid\n  try {\n    rows = preFilteredRows\n      .map((row: any) => ({\n        ...Object.fromEntries(\n          Object.entries(row[1]).map(entry => [entry[0], String(entry[1])]),\n        ),\n        sample: row[0],\n        id: row[0],\n      }))\n      .filter((row: any) => {\n        return filters.length\n          ? filters.every(key => {\n              const val = row[key]\n              const currFilter = filter[key]\n              return currFilter ? val.match(new RegExp(currFilter, 'i')) : true\n            })\n          : true\n      })\n  } catch (e) {\n    error = e\n  }\n  // disableSelectionOnClick helps avoid\n  // https://github.com/mui-org/material-ui-x/issues/1197\n  return (\n    <BaseCard {...props} title=\"Samples\">\n      {error ? <Typography color=\"error\">{`${error}`}</Typography> : null}\n\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={showFilters}\n            onChange={() => setShowFilters(f => !f)}\n          />\n        }\n        label=\"Show sample filters\"\n      />\n      {showFilters ? (\n        <>\n          <Typography>\n            These filters can use a plain text search or regex style query, e.g.\n            in the genotype field, entering 1 will query for all genotypes that\n            include the first alternate allele e.g. 0|1 or 1|1, entering\n            [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33\n          </Typography>\n          {infoFields.map(({ field }) => {\n            return (\n              <TextField\n                key={`filter-${field}`}\n                placeholder={`Filter ${field}`}\n                value={filter[field] || ''}\n                onChange={event =>\n                  setFilter({ ...filter, [field]: event.target.value })\n                }\n              />\n            )\n          })}\n        </>\n      ) : null}\n      <div style={{ height: 600, width: '100%', overflow: 'auto' }}>\n        <DataGrid\n          rows={rows}\n          columns={infoFields}\n          rowHeight={20}\n          headerHeight={25}\n          disableSelectionOnClick\n          disableColumnMenu\n        />\n      </div>\n    </BaseCard>\n  )\n}\n\nfunction BreakendPanel(props: {\n  locStrings: string[]\n  model: any\n  feature: SimpleFeatureSerialized\n}) {\n  const { model, locStrings, feature } = props\n  const session = getSession(model)\n  const { pluginManager } = getEnv(session)\n  const [breakpointDialog, setBreakpointDialog] = useState(false)\n  let viewType: any\n  try {\n    viewType = pluginManager.getViewType('BreakpointSplitView')\n  } catch (e) {\n    // plugin not added\n  }\n\n  const simpleFeature = new SimpleFeature(feature)\n  return (\n    <BaseCard {...props} title=\"Breakends\">\n      <Typography>Link to linear view of breakend endpoints</Typography>\n      <ul>\n        {locStrings.map((locString, index) => {\n          return (\n            <li key={`${JSON.stringify(locString)}-${index}`}>\n              <Link\n                href=\"#\"\n                onClick={() => {\n                  const { view } = model\n                  if (view) {\n                    view.navToLocString?.(locString)\n                  } else {\n                    session.notify(\n                      'No view associated with this feature detail panel anymore',\n                      'warning',\n                    )\n                  }\n                }}\n              >\n                {`LGV - ${locString}`}\n              </Link>\n            </li>\n          )\n        })}\n      </ul>\n      {viewType ? (\n        <>\n          <Typography>\n            Launch split views with breakend source and target\n          </Typography>\n          <ul>\n            {locStrings.map((locString, index) => {\n              return (\n                <li key={`${JSON.stringify(locString)}-${index}`}>\n                  <Link\n                    href=\"#\"\n                    onClick={() => {\n                      setBreakpointDialog(true)\n                    }}\n                  >\n                    {`${feature.refName}:${feature.start} // ${locString} (split view)`}\n                  </Link>\n                </li>\n              )\n            })}\n          </ul>\n          {breakpointDialog ? (\n            <BreakendOptionDialog\n              model={model}\n              feature={simpleFeature}\n              viewType={viewType}\n              handleClose={() => {\n                setBreakpointDialog(false)\n              }}\n            />\n          ) : null}\n        </>\n      ) : null}\n    </BaseCard>\n  )\n}\n\nfunction VariantFeatureDetails(props: any) {\n  const { model } = props\n  const { featureData, descriptions } = model\n  const feat = JSON.parse(JSON.stringify(featureData))\n  const { samples, ...rest } = feat\n  const basicDescriptions = {\n    CHROM: 'chromosome: An identifier from the reference genome',\n    POS:\n      'position: The reference position, with the 1st base having position 1',\n    ID:\n      'identifier: Semi-colon separated list of unique identifiers where available',\n    REF:\n      'reference base(s): Each base must be one of A,C,G,T,N (case insensitive).',\n    ALT:\n      ' alternate base(s): Comma-separated list of alternate non-reference alleles',\n    QUAL: 'quality: Phred-scaled quality score for the assertion made in ALT',\n    FILTER:\n      'filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail',\n  }\n\n  return (\n    <Paper data-testid=\"variant-side-drawer\">\n      <FeatureDetails\n        feature={{\n          ...rest,\n          ALT: rest.ALT?.map((alt: string | Breakend) => toString(alt)),\n        }}\n        descriptions={{ ...basicDescriptions, ...descriptions }}\n        {...props}\n      />\n      <Divider />\n      {feat.type === 'breakend' ? (\n        <BreakendPanel\n          feature={feat}\n          locStrings={feat.ALT.map((alt: any) => alt.MatePosition)}\n          model={model}\n        />\n      ) : null}\n      {feat.type === 'translocation' ? (\n        <BreakendPanel\n          feature={feat}\n          model={model}\n          locStrings={[`${feat.INFO.CHR2[0]}:${feat.INFO.END}`]}\n        />\n      ) : null}\n      <VariantSamples feature={feat} {...props} />\n    </Paper>\n  )\n}\n\nexport default observer(VariantFeatureDetails)\n"],"names":["ChordVariantDisplayF","pluginManager","jbrequire","types","ConfigurationSchema","ConfigurationReference","getContainingView","getParentRenderProps","configSchema","renderer","optional","pluggableConfigSchemaType","type","baseConfiguration","baseChordDisplayConfig","explicitlyTyped","stateModel","compose","BaseChordDisplayModel","model","literal","configuration","views","self","rendererTypeName","renderProps","view","rpcDriverName","displayModel","bezierRadius","radiusPx","bezierRadiusRatio","radius","blockDefinitions","config","onChordClick","lib","load","DisplayType","ChordVariantDisplay","name","trackType","viewType","ReactComponent","BaseChordDisplayComponentFactory","LinearVariantDisplayConfigFactory","linearBasicDisplayConfigSchemaFactory","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","linearBasicDisplayModelFactory","actions","selectFeature","feature","session","getSession","isSessionModelWithWidgets","rpcManager","sessionId","getRpcSessionId","track","getContainingTrack","adapterConfig","getConf","header","featureWidget","addWidget","featureData","toJSON","descriptions","showWidget","setSelection","ChordRendererF","React","useMemo","observer","MobxPropTypes","PropTypes","polarToCartesian","readConfObject","CommonPropTypes","bpToRadians","block","pos","blockStart","region","elided","start","blockEnd","end","bpOffset","flipped","radians","bpPerRadian","startRadians","Chord","blocksForRefs","selected","onClick","startBlock","get","svType","SVTYPE","endPosition","endBlock","breakendSpecification","matePosition","MatePosition","split","parseInt","chr2","CHR2","END","mate","refName","startPos","endRadians","startXY","endXY","controlXY","strokeColor","hoverStrokeColor","id","join","stroke","evt","target","style","StructuralVariantChords","props","features","selectedFeatureId","blocksForRefsMemo","regions","chords","String","trackStyleId","__html","propTypes","instanceOf","Map","isRequired","ConfigSchema","objectOrObservableObject","arrayOf","number","string","oneOfType","func","defaultProps","ChordRendererConfigF","ChordRendererType","ReactComponentFactory","description","defaultValue","contextVariable","strokeColorSelected","strokeColorHover","stateModelFactory","ElementId","safeReference","pluggableMstType","frozen","setFeatureData","data","clearFeatureData","vcfGzLocation","uri","index","indexType","enumeration","location","vcfLocation","VCFFeature","args","variant","parser","dataFromVariant","_id","field","SAMPLES","t","REF","ALT","POS","CHROM","INFO","ID","_getSOTermAndDescription","SO_term","isTRA","some","f","isSymbolic","indexOf","aliases","ref","alt","soTerms","Set","a","_getSOAndDescFromAltDefs","soTerm","_getSOAndDescByExamination","add","size","prefixes","map","desc","prefix","new_descs","suffixes","pref","filter","startsWith","_altTypeToSO","getMetadata","modAlt","_makeDescriptionString","includes","uniqueId","samples","DEL","INS","DUP","INV","INVDUP","CNV","TRA","NON_REF","VariantsPlugin","addAdapterType","AdapterType","vcfTabixAdapterConfigSchema","getAdapterClass","r","vcfAdapterConfigSchema","addRendererType","StructuralVariantChordRendererFactory","addTrackType","createBaseTrackConfig","TrackType","createBaseTrackModel","addDisplayType","linearVariantDisplayConfigSchemaFactory","linearVariantDisplayModelFactory","BaseLinearDisplayComponent","addWidgetType","WidgetType","heading","variantFeatureWidgetConfigSchema","variantFeatureWidgetStateModelFactory","lazy","Plugin","configured","filehandle","openLocation","isCSI","vcf","TabixIndexedFile","csiFilehandle","tbiFilehandle","chunkCacheSize","chunkSizeLimit","getHeader","VcfParser","e","opts","configure","getReferenceSequenceNames","query","ObservableCreate","getLines","lineCallback","line","fileOffset","VcfFeature","parseLine","signal","superGetFeaturesInMultipleRegions","bytesForRegions","bytes","stat","pct","Math","round","console","warn","subscribe","all","blocksForRange","blockResults","byteRanges","blocks","minv","blockPosition","maxv","find","range","min","max","reduce","b","BaseFeatureDataAdapter","readVcf","lines","refNames","rest","VcfAdapter","readFile","fileContents","TextDecoder","unzip","decode","decodeFileContents","VCF","setupP","_","setup","feats","useStyles","makeStyles","theme","closeButton","position","right","spacing","top","color","palette","grey","display","BreakendOptionDialog","handleClose","classes","useState","copyTracks","setCopyTracks","mirrorTracks","setMirrorTracks","Dialog","open","onClose","DialogTitle","IconButton","className","CloseIcon","Divider","DialogContent","FormControlLabel","control","Checkbox","checked","onChange","val","label","DialogActions","Button","viewSnapshot","snapshotFromBreakendFeature","offsetPx","width","viewTracks","getSnapshot","tracks","addView","autoFocus","feat","char","MateDirection","Join","Replacement","VariantSamples","setFilter","showFilters","setShowFilters","preFilteredRows","entries","infoFields","rows","filters","row","fromEntries","sample","every","currFilter","match","RegExp","BaseCard","title","Typography","TextField","placeholder","event","height","overflow","DataGrid","columns","rowHeight","headerHeight","disableSelectionOnClick","disableColumnMenu","BreakendPanel","locStrings","getEnv","breakpointDialog","setBreakpointDialog","getViewType","simpleFeature","SimpleFeature","locString","JSON","stringify","Link","href","navToLocString","notify","VariantFeatureDetails","parse","basicDescriptions","QUAL","FILTER","Paper","FeatureDetails"],"mappings":"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"}
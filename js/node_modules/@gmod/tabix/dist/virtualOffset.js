"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs2/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs2/core-js/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.fromBytes = fromBytes;
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime-corejs2/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime-corejs2/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime-corejs2/helpers/defineProperty"));

var VirtualOffset = /*#__PURE__*/function () {
  function VirtualOffset(blockPosition, dataPosition) {
    (0, _classCallCheck2.default)(this, VirtualOffset);
    (0, _defineProperty2.default)(this, "blockPosition", void 0);
    (0, _defineProperty2.default)(this, "dataPosition", void 0);
    this.blockPosition = blockPosition; // < offset of the compressed data block

    this.dataPosition = dataPosition; // < offset into the uncompressed data
  }

  (0, _createClass2.default)(VirtualOffset, [{
    key: "toString",
    value: function toString() {
      return "".concat(this.blockPosition, ":").concat(this.dataPosition);
    }
  }, {
    key: "compareTo",
    value: function compareTo(b) {
      return this.blockPosition - b.blockPosition || this.dataPosition - b.dataPosition;
    }
  }], [{
    key: "min",
    value: function min() {
      var min;
      var i = 0;

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      for (; !min; i += 1) {
        min = args[i];
      }

      for (; i < args.length; i += 1) {
        if (min.compareTo(args[i]) > 0) min = args[i];
      }

      return min;
    }
  }]);
  return VirtualOffset;
}();

exports.default = VirtualOffset;

function fromBytes(bytes) {
  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  var bigendian = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  if (bigendian) throw new Error('big-endian virtual file offsets not implemented');
  return new VirtualOffset(bytes[offset + 7] * 0x10000000000 + bytes[offset + 6] * 0x100000000 + bytes[offset + 5] * 0x1000000 + bytes[offset + 4] * 0x10000 + bytes[offset + 3] * 0x100 + bytes[offset + 2], bytes[offset + 1] << 8 | bytes[offset]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy92aXJ0dWFsT2Zmc2V0LnRzIl0sIm5hbWVzIjpbIlZpcnR1YWxPZmZzZXQiLCJibG9ja1Bvc2l0aW9uIiwiZGF0YVBvc2l0aW9uIiwiYiIsIm1pbiIsImkiLCJhcmdzIiwibGVuZ3RoIiwiY29tcGFyZVRvIiwiZnJvbUJ5dGVzIiwiYnl0ZXMiLCJvZmZzZXQiLCJiaWdlbmRpYW4iLCJFcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFxQkEsYTtBQUduQix5QkFBWUMsYUFBWixFQUFtQ0MsWUFBbkMsRUFBeUQ7QUFBQTtBQUFBO0FBQUE7QUFDdkQsU0FBS0QsYUFBTCxHQUFxQkEsYUFBckIsQ0FEdUQsQ0FDcEI7O0FBQ25DLFNBQUtDLFlBQUwsR0FBb0JBLFlBQXBCLENBRnVELENBRXRCO0FBQ2xDOzs7OytCQUVVO0FBQ1QsdUJBQVUsS0FBS0QsYUFBZixjQUFnQyxLQUFLQyxZQUFyQztBQUNEOzs7OEJBRVNDLEMsRUFBa0I7QUFDMUIsYUFDRSxLQUFLRixhQUFMLEdBQXFCRSxDQUFDLENBQUNGLGFBQXZCLElBQXdDLEtBQUtDLFlBQUwsR0FBb0JDLENBQUMsQ0FBQ0QsWUFEaEU7QUFHRDs7OzBCQUVvQztBQUNuQyxVQUFJRSxHQUFKO0FBQ0EsVUFBSUMsQ0FBQyxHQUFHLENBQVI7O0FBRm1DLHdDQUF2QkMsSUFBdUI7QUFBdkJBLFFBQUFBLElBQXVCO0FBQUE7O0FBR25DLGFBQU8sQ0FBQ0YsR0FBUixFQUFhQyxDQUFDLElBQUksQ0FBbEI7QUFBcUJELFFBQUFBLEdBQUcsR0FBR0UsSUFBSSxDQUFDRCxDQUFELENBQVY7QUFBckI7O0FBQ0EsYUFBT0EsQ0FBQyxHQUFHQyxJQUFJLENBQUNDLE1BQWhCLEVBQXdCRixDQUFDLElBQUksQ0FBN0IsRUFBZ0M7QUFDOUIsWUFBSUQsR0FBRyxDQUFDSSxTQUFKLENBQWNGLElBQUksQ0FBQ0QsQ0FBRCxDQUFsQixJQUF5QixDQUE3QixFQUFnQ0QsR0FBRyxHQUFHRSxJQUFJLENBQUNELENBQUQsQ0FBVjtBQUNqQzs7QUFDRCxhQUFPRCxHQUFQO0FBQ0Q7Ozs7Ozs7QUFFSSxTQUFTSyxTQUFULENBQW1CQyxLQUFuQixFQUFpRTtBQUFBLE1BQS9CQyxNQUErQix1RUFBdEIsQ0FBc0I7QUFBQSxNQUFuQkMsU0FBbUIsdUVBQVAsS0FBTztBQUN0RSxNQUFJQSxTQUFKLEVBQ0UsTUFBTSxJQUFJQyxLQUFKLENBQVUsaURBQVYsQ0FBTjtBQUVGLFNBQU8sSUFBSWIsYUFBSixDQUNMVSxLQUFLLENBQUNDLE1BQU0sR0FBRyxDQUFWLENBQUwsR0FBb0IsYUFBcEIsR0FDRUQsS0FBSyxDQUFDQyxNQUFNLEdBQUcsQ0FBVixDQUFMLEdBQW9CLFdBRHRCLEdBRUVELEtBQUssQ0FBQ0MsTUFBTSxHQUFHLENBQVYsQ0FBTCxHQUFvQixTQUZ0QixHQUdFRCxLQUFLLENBQUNDLE1BQU0sR0FBRyxDQUFWLENBQUwsR0FBb0IsT0FIdEIsR0FJRUQsS0FBSyxDQUFDQyxNQUFNLEdBQUcsQ0FBVixDQUFMLEdBQW9CLEtBSnRCLEdBS0VELEtBQUssQ0FBQ0MsTUFBTSxHQUFHLENBQVYsQ0FORixFQU9KRCxLQUFLLENBQUNDLE1BQU0sR0FBRyxDQUFWLENBQUwsSUFBcUIsQ0FBdEIsR0FBMkJELEtBQUssQ0FBQ0MsTUFBRCxDQVAzQixDQUFQO0FBU0QiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBWaXJ0dWFsT2Zmc2V0IHtcbiAgcHVibGljIGJsb2NrUG9zaXRpb246IG51bWJlclxuICBwdWJsaWMgZGF0YVBvc2l0aW9uOiBudW1iZXJcbiAgY29uc3RydWN0b3IoYmxvY2tQb3NpdGlvbjogbnVtYmVyLCBkYXRhUG9zaXRpb246IG51bWJlcikge1xuICAgIHRoaXMuYmxvY2tQb3NpdGlvbiA9IGJsb2NrUG9zaXRpb24gLy8gPCBvZmZzZXQgb2YgdGhlIGNvbXByZXNzZWQgZGF0YSBibG9ja1xuICAgIHRoaXMuZGF0YVBvc2l0aW9uID0gZGF0YVBvc2l0aW9uIC8vIDwgb2Zmc2V0IGludG8gdGhlIHVuY29tcHJlc3NlZCBkYXRhXG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5ibG9ja1Bvc2l0aW9ufToke3RoaXMuZGF0YVBvc2l0aW9ufWBcbiAgfVxuXG4gIGNvbXBhcmVUbyhiOiBWaXJ0dWFsT2Zmc2V0KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuYmxvY2tQb3NpdGlvbiAtIGIuYmxvY2tQb3NpdGlvbiB8fCB0aGlzLmRhdGFQb3NpdGlvbiAtIGIuZGF0YVBvc2l0aW9uXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIG1pbiguLi5hcmdzOiBWaXJ0dWFsT2Zmc2V0W10pIHtcbiAgICBsZXQgbWluXG4gICAgbGV0IGkgPSAwXG4gICAgZm9yICg7ICFtaW47IGkgKz0gMSkgbWluID0gYXJnc1tpXVxuICAgIGZvciAoOyBpIDwgYXJncy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKG1pbi5jb21wYXJlVG8oYXJnc1tpXSkgPiAwKSBtaW4gPSBhcmdzW2ldXG4gICAgfVxuICAgIHJldHVybiBtaW5cbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CeXRlcyhieXRlczogQnVmZmVyLCBvZmZzZXQgPSAwLCBiaWdlbmRpYW4gPSBmYWxzZSkge1xuICBpZiAoYmlnZW5kaWFuKVxuICAgIHRocm93IG5ldyBFcnJvcignYmlnLWVuZGlhbiB2aXJ0dWFsIGZpbGUgb2Zmc2V0cyBub3QgaW1wbGVtZW50ZWQnKVxuXG4gIHJldHVybiBuZXcgVmlydHVhbE9mZnNldChcbiAgICBieXRlc1tvZmZzZXQgKyA3XSAqIDB4MTAwMDAwMDAwMDAgK1xuICAgICAgYnl0ZXNbb2Zmc2V0ICsgNl0gKiAweDEwMDAwMDAwMCArXG4gICAgICBieXRlc1tvZmZzZXQgKyA1XSAqIDB4MTAwMDAwMCArXG4gICAgICBieXRlc1tvZmZzZXQgKyA0XSAqIDB4MTAwMDAgK1xuICAgICAgYnl0ZXNbb2Zmc2V0ICsgM10gKiAweDEwMCArXG4gICAgICBieXRlc1tvZmZzZXQgKyAyXSxcbiAgICAoYnl0ZXNbb2Zmc2V0ICsgMV0gPDwgOCkgfCBieXRlc1tvZmZzZXRdLFxuICApXG59XG4iXX0=
"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs2/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs2/core-js/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime-corejs2/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime-corejs2/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime-corejs2/helpers/defineProperty"));

// little class representing a chunk in the index
var Chunk = /*#__PURE__*/function () {
  /**
   * @param {VirtualOffset} minv
   * @param {VirtualOffset} maxv
   * @param {number} bin
   * @param {number} [fetchedSize]
   */
  function Chunk(minv, maxv, bin) {
    var fetchedSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : undefined;
    (0, _classCallCheck2.default)(this, Chunk);
    (0, _defineProperty2.default)(this, "minv", void 0);
    (0, _defineProperty2.default)(this, "maxv", void 0);
    (0, _defineProperty2.default)(this, "bin", void 0);
    (0, _defineProperty2.default)(this, "_fetchedSize", void 0);
    this.minv = minv;
    this.maxv = maxv;
    this.bin = bin;
    this._fetchedSize = fetchedSize;
  }

  (0, _createClass2.default)(Chunk, [{
    key: "toUniqueString",
    value: function toUniqueString() {
      return "".concat(this.minv, "..").concat(this.maxv, " (bin ").concat(this.bin, ", fetchedSize ").concat(this.fetchedSize(), ")");
    }
  }, {
    key: "toString",
    value: function toString() {
      return this.toUniqueString();
    }
  }, {
    key: "compareTo",
    value: function compareTo(b) {
      return this.minv.compareTo(b.minv) || this.maxv.compareTo(b.maxv) || this.bin - b.bin;
    }
  }, {
    key: "fetchedSize",
    value: function fetchedSize() {
      if (this._fetchedSize !== undefined) return this._fetchedSize;
      return this.maxv.blockPosition + (1 << 16) - this.minv.blockPosition;
    }
  }]);
  return Chunk;
}();

exports.default = Chunk;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jaHVuay50cyJdLCJuYW1lcyI6WyJDaHVuayIsIm1pbnYiLCJtYXh2IiwiYmluIiwiZmV0Y2hlZFNpemUiLCJ1bmRlZmluZWQiLCJfZmV0Y2hlZFNpemUiLCJ0b1VuaXF1ZVN0cmluZyIsImIiLCJjb21wYXJlVG8iLCJibG9ja1Bvc2l0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtJQUNxQkEsSztBQU1uQjs7Ozs7O0FBTUEsaUJBQ0VDLElBREYsRUFFRUMsSUFGRixFQUdFQyxHQUhGLEVBS0U7QUFBQSxRQURBQyxXQUNBLHVFQURjQyxTQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLFNBQUtKLElBQUwsR0FBWUEsSUFBWjtBQUNBLFNBQUtDLElBQUwsR0FBWUEsSUFBWjtBQUNBLFNBQUtDLEdBQUwsR0FBV0EsR0FBWDtBQUNBLFNBQUtHLFlBQUwsR0FBb0JGLFdBQXBCO0FBQ0Q7Ozs7cUNBRWdCO0FBQ2YsdUJBQVUsS0FBS0gsSUFBZixlQUF3QixLQUFLQyxJQUE3QixtQkFDRSxLQUFLQyxHQURQLDJCQUVpQixLQUFLQyxXQUFMLEVBRmpCO0FBR0Q7OzsrQkFFVTtBQUNULGFBQU8sS0FBS0csY0FBTCxFQUFQO0FBQ0Q7Ozs4QkFFU0MsQyxFQUFVO0FBQ2xCLGFBQ0UsS0FBS1AsSUFBTCxDQUFVUSxTQUFWLENBQW9CRCxDQUFDLENBQUNQLElBQXRCLEtBQ0EsS0FBS0MsSUFBTCxDQUFVTyxTQUFWLENBQW9CRCxDQUFDLENBQUNOLElBQXRCLENBREEsSUFFQSxLQUFLQyxHQUFMLEdBQVdLLENBQUMsQ0FBQ0wsR0FIZjtBQUtEOzs7a0NBRWE7QUFDWixVQUFJLEtBQUtHLFlBQUwsS0FBc0JELFNBQTFCLEVBQXFDLE9BQU8sS0FBS0MsWUFBWjtBQUNyQyxhQUFPLEtBQUtKLElBQUwsQ0FBVVEsYUFBVixJQUEyQixLQUFLLEVBQWhDLElBQXNDLEtBQUtULElBQUwsQ0FBVVMsYUFBdkQ7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vdmlydHVhbE9mZnNldCdcblxuLy8gbGl0dGxlIGNsYXNzIHJlcHJlc2VudGluZyBhIGNodW5rIGluIHRoZSBpbmRleFxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2h1bmsge1xuICBwdWJsaWMgbWludjogVmlydHVhbE9mZnNldFxuICBwdWJsaWMgbWF4djogVmlydHVhbE9mZnNldFxuICBwdWJsaWMgYmluOiBudW1iZXJcbiAgcHVibGljIF9mZXRjaGVkU2l6ZT86IG51bWJlclxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1ZpcnR1YWxPZmZzZXR9IG1pbnZcbiAgICogQHBhcmFtIHtWaXJ0dWFsT2Zmc2V0fSBtYXh2XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiaW5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtmZXRjaGVkU2l6ZV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIG1pbnY6IFZpcnR1YWxPZmZzZXQsXG4gICAgbWF4djogVmlydHVhbE9mZnNldCxcbiAgICBiaW46IG51bWJlcixcbiAgICBmZXRjaGVkU2l6ZSA9IHVuZGVmaW5lZCxcbiAgKSB7XG4gICAgdGhpcy5taW52ID0gbWludlxuICAgIHRoaXMubWF4diA9IG1heHZcbiAgICB0aGlzLmJpbiA9IGJpblxuICAgIHRoaXMuX2ZldGNoZWRTaXplID0gZmV0Y2hlZFNpemVcbiAgfVxuXG4gIHRvVW5pcXVlU3RyaW5nKCkge1xuICAgIHJldHVybiBgJHt0aGlzLm1pbnZ9Li4ke3RoaXMubWF4dn0gKGJpbiAke1xuICAgICAgdGhpcy5iaW5cbiAgICB9LCBmZXRjaGVkU2l6ZSAke3RoaXMuZmV0Y2hlZFNpemUoKX0pYFxuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9VbmlxdWVTdHJpbmcoKVxuICB9XG5cbiAgY29tcGFyZVRvKGI6IENodW5rKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubWludi5jb21wYXJlVG8oYi5taW52KSB8fFxuICAgICAgdGhpcy5tYXh2LmNvbXBhcmVUbyhiLm1heHYpIHx8XG4gICAgICB0aGlzLmJpbiAtIGIuYmluXG4gICAgKVxuICB9XG5cbiAgZmV0Y2hlZFNpemUoKSB7XG4gICAgaWYgKHRoaXMuX2ZldGNoZWRTaXplICE9PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLl9mZXRjaGVkU2l6ZVxuICAgIHJldHVybiB0aGlzLm1heHYuYmxvY2tQb3NpdGlvbiArICgxIDw8IDE2KSAtIHRoaXMubWludi5ibG9ja1Bvc2l0aW9uXG4gIH1cbn1cbiJdfQ==